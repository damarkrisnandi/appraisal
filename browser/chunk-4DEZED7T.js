import{a as ie,b as Me}from"./chunk-J74OJCMS.js";import{a as W,b as de}from"./chunk-MND7QEW5.js";import{A as se,H as C,g as ke,j as P,k as z,l as Y,o as Z,p as ee}from"./chunk-TWGBUOMK.js";import{m as L,o as I,s as me}from"./chunk-XUJTQNY3.js";import"./chunk-4YRY4IP2.js";import"./chunk-QNAHFPN7.js";import"./chunk-5TPOAWEP.js";import{a as oe}from"./chunk-OQKDZ6KP.js";import{b as k,e as x,f as D,h as c,k as $,l as F,n as Fe,q as Ie}from"./chunk-SBW42UDC.js";import{b as Pe}from"./chunk-BQYB7PSU.js";import{sa as X,va as xe,wa as Te}from"./chunk-OWQSGUGC.js";import{m as K,s as Q}from"./chunk-LDJVXUVP.js";import{Ab as G,Bb as i,Cb as r,Db as a,Hb as T,Kb as m,Lb as g,Ub as q,Vb as l,Wb as w,Xb as S,Za as s,_ as pe,ac as we,bc as b,cc as M,da as B,ea as _,gb as d,ia as y,mc as U,ob as E,oc as H,pc as N,rb as f,sa as j,ta as v,wb as V,yb as $e,zb as O}from"./chunk-PVR6VDV5.js";var te=class{id;projectName;projectManagerId;projectManager;teamLeaderId;teamLeader;totalMember;startDate;endDate;employeeList=[];levelDescription};function Oe(n,t){if(n&1&&(i(0,"div",7)(1,"div",9),l(2),r(),i(3,"div",10),l(4," - "),r(),i(5,"div",3),l(6),r()()),n&2){let e=t.$implicit;s(2),S(" ",e.fullName," "),s(4),S(" ",e.directorateDescription," ")}}var ce=class n{projectStore=_(h);ref=_(W);onClickClose(){this.ref.close()}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=y({type:n,selectors:[["app-project-view-lookup"]],standalone:!0,features:[b],decls:57,vars:13,consts:[[1,"grid","grid-cols-12","gap-2",3,"formGroup"],[1,"col-span-2","flex","items-center"],[1,"break-words"],[1,"col-span-6"],[1,"p-2","border","rounded-md","bg-gray-300"],[1,"col-span-4"],[1,"col-span-2","flex","mt-2"],[1,"grid","grid-cols-12","gap-2"],["label","OK",3,"onClick"],[1,"col-span-5"],[1,"col-span-1","text-center"]],template:function(e,o){if(e&1&&(i(0,"div",0)(1,"div",1)(2,"p",2),l(3,"Project Name"),r()(),i(4,"div",3)(5,"p",4),l(6),r()(),a(7,"div",5),i(8,"div",1)(9,"p",2),l(10,"Project Manager"),a(11,"br"),l(12,"/ Penanggung Jawab"),r()(),i(13,"div",3)(14,"p",4),l(15),r()(),a(16,"div",5),i(17,"div",1)(18,"p",2),l(19,"Team Leader"),r()(),i(20,"div",3)(21,"p",4),l(22),r()(),a(23,"div",5),i(24,"div",1)(25,"p",2),l(26,"Start Date"),r()(),i(27,"div",3)(28,"p",4),l(29),U(30,"date"),r()(),a(31,"div",5),i(32,"div",1)(33,"p",2),l(34,"End Date"),r()(),i(35,"div",3)(36,"p",4),l(37),U(38,"date"),r()(),a(39,"div",5),i(40,"div",1)(41,"p",2),l(42,"Total of Member"),r()(),i(43,"div",3)(44,"p",4),l(45),r()(),a(46,"div",5),i(47,"div",6)(48,"p",2),l(49,"Name of Member"),r()(),i(50,"div",3)(51,"p",4),O(52,Oe,7,2,"div",7,$e),r()(),a(54,"div",5),i(55,"div")(56,"p-button",8),m("onClick",function(){return o.onClickClose()}),r()()()),e&2){let p,u,A,Se,Ee,Le,De;f("formGroup",o.projectStore.$viewForm()),s(6),S(" ",(p=o.projectStore.$viewForm().get("projectName"))==null?null:p.value," "),s(9),S(" ",(u=o.projectStore.$viewForm().get("projectManager"))==null?null:u.value," "),s(7),S(" ",(A=o.projectStore.$viewForm().get("teamLeader"))==null?null:A.value," "),s(7),S(" ",H(30,7,(Se=o.projectStore.$viewForm().get("startDate"))==null?null:Se.value,"dd/MM/yyyy")," "),s(8),S(" ",H(38,10,(Ee=o.projectStore.$viewForm().get("endDate"))==null?null:Ee.value,"dd/MM/yyyy")," "),s(8),S(" ",(Le=o.projectStore.$viewForm().get("totalMember"))==null?null:Le.value," "),s(7),G((De=o.projectStore.$viewForm().get("employeeList"))==null?null:De.value)}},dependencies:[C,D,L,$,Q]})};var Ge=(n,t)=>t.field,ze=()=>({"min-width":"50rem"}),We=()=>[5,10,20];function Be(n,t){n&1&&(i(0,"tr")(1,"td",14)(2,"div"),l(3,"Loading data..."),r()()())}function Ue(n,t){if(n&1&&(i(0,"th",16),l(1),r()),n&2){let e=t.$implicit;s(),S(" ",e.header," ")}}function He(n,t){if(n&1&&(i(0,"tr"),E(1,Ue,2,1,"th",15),i(2,"th"),l(3," Action "),r()()),n&2){let e=t.$implicit;s(),f("ngForOf",e)}}function Je(n,t){if(n&1&&(i(0,"td",19),l(1),r()),n&2){let e=g().$implicit,o=g().$implicit;s(),w(o[e.field])}}function qe(n,t){if(n&1&&(i(0,"td"),l(1),r()),n&2){let e=g().$implicit,o=g().$implicit;s(),w(o[e.field])}}function Ke(n,t){if(n&1&&E(0,Je,2,1,"td",19)(1,qe,2,1,"td"),n&2){let e=t.$implicit;V(e.format==="center"?0:1)}}function Qe(n,t){if(n&1){let e=T();i(0,"tr",17),O(1,Ke,2,1,null,null,Ge),i(3,"td")(4,"p-button",18),m("onClick",function(){let p=j(e).$implicit,u=g();return v(u.pilih(p))}),r()()()}if(n&2){let e=t.$implicit,o=t.columns;f("pSelectableRow",e),s(),G(o)}}var ue=class n{projectStore=_(h);ref=_(W);visibleViewLookup=!1;batal(){this.ref.close()}pilih(t){this.ref.close(t)}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=y({type:n,selectors:[["app-employee-lookup"]],standalone:!0,features:[b],decls:18,vars:14,consts:[["header",""],["body",""],["header","Project List"],[1,"grid","grid-cols-12","gap-4",3,"formGroup"],[1,"col-span-2"],["formControlName","category","placeholder","Search By",1,"w-full",3,"options"],[1,"col-span-7"],["type","text","pInputText","","formControlName","searchText",1,"w-full"],[1,"col-span-1"],["label","Search",3,"onClick"],["label","Reset",3,"onClick"],["stripedRows","","showGridlines","",3,"onLazyLoad","value","tableStyle","columns","loading","lazy","paginator","rows","rowsPerPageOptions","paginatorDropdownAppendTo","totalRecords"],["pTemplate","loadingbody"],["label","Batal",3,"onClick"],["colspan","9",1,"text-center"],["class","!text-center",4,"ngFor","ngForOf"],[1,"!text-center"],[3,"pSelectableRow"],["label","Pilih",3,"onClick"],[2,"text-align","center"]],template:function(e,o){if(e&1){let p=T();i(0,"p-panel",2)(1,"div",3)(2,"div",4),a(3,"p-select",5),r(),i(4,"div",6),a(5,"input",7),r(),i(6,"div",8)(7,"p-button",9),m("onClick",function(){return j(p),v(o.projectStore.onClickSearch())}),r()(),i(8,"div",8)(9,"p-button",10),m("onClick",function(){return j(p),v(o.projectStore.onClickResetSearch())}),r()()(),a(10,"br"),i(11,"p-table",11),m("onLazyLoad",function(A){return j(p),v(o.projectStore.onLazyLoadEmployee(A))}),E(12,Be,4,0,"ng-template",12)(13,He,4,1,"ng-template",null,0,N)(15,Qe,5,1,"ng-template",null,1,N),r(),i(17,"p-button",13),m("onClick",function(){return j(p),v(o.batal())}),r()()}if(e&2){let p=q(16);s(),f("formGroup",o.projectStore.$searchForm()),s(2),f("options",o.projectStore.$optionsCategoryEmployeeList()),s(8),f("value",o.projectStore.$dataListEmployee())("tableStyle",M(12,ze))("columns",o.projectStore.$colsEmployee())("loading",o.projectStore.$dataLoading())("lazy",!0)("paginator",!0)("rows",5)("rowsPerPageOptions",M(13,We))("paginatorDropdownAppendTo",p)("totalRecords",o.projectStore.$totalRowCount())}},dependencies:[C,P,X,k,x,D,I,z,L,Z,ee,K,$,F]})};var ae=class n{projectStore=_(h);ref=_(W);onClickSave(){this.ref.close(!0)}onClickCancel(){this.projectStore.$projectEditDetailAddLookupForm().reset(),this.ref.close()}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=y({type:n,selectors:[["app-project-edit-detail-add-lookup"]],standalone:!0,features:[b],decls:42,vars:4,consts:[[1,"grid","grid-cols-12","gap-2",3,"formGroup"],[1,"col-span-2","flex"],[1,"break-words"],[1,"col-span-6"],["type","text","pInputText","","formControlName","memberName",1,"w-full","p-2","border","rounded-md"],[1,"col-span-1"],["icon","pi pi-search",3,"onClick"],[1,"col-span-3"],["formControlName","department","id","position","name","position","placeholder","-- pilih --","appendTo","body",1,"w-full",3,"options"],[1,"col-span-4"],["formControlName","position","id","position","name","position","placeholder","-- pilih --","appendTo","body",1,"w-full",3,"options"],["formControlName","level","id","level","name","level","placeholder","-- pilih --","appendTo","body",1,"w-full",3,"options"],["formControlName","startDate","appendTo","body"],["formControlName","endDate","appendTo","body"],["label","save",3,"onClick"],["label","cancel",3,"onClick"]],template:function(e,o){e&1&&(i(0,"div",0)(1,"div",1)(2,"p",2),l(3,"Member Name"),r()(),i(4,"div",3),a(5,"input",4),r(),i(6,"div",5)(7,"p-button",6),m("onClick",function(){return o.projectStore.onClickLookupTeamLeader("member")}),r()(),a(8,"div",7),i(9,"div",1)(10,"p",2),l(11,"Department"),r()(),i(12,"div",3),a(13,"p-select",8),r(),a(14,"div",9),i(15,"div",1)(16,"p",2),l(17,"Position"),r()(),i(18,"div",3),a(19,"p-select",10),r(),a(20,"div",9),i(21,"div",1)(22,"p",2),l(23,"Level"),r()(),i(24,"div",3),a(25,"p-select",11),r(),a(26,"div",9),i(27,"div",1)(28,"p",2),l(29,"Start Date"),r()(),i(30,"div",3),a(31,"p-datepicker",12),r(),a(32,"div",9),i(33,"div",1)(34,"p",2),l(35,"End Date"),r()(),i(36,"div",3),a(37,"p-datepicker",13),r(),a(38,"div",9)(39,"br"),i(40,"p-button",14),m("onClick",function(){return o.onClickSave()}),r(),i(41,"p-button",15),m("onClick",function(){return o.onClickCancel()}),r()()),e&2&&(f("formGroup",o.projectStore.$projectEditDetailAddLookupForm()),s(13),f("options",o.projectStore.$optionDepartment()),s(6),f("options",o.projectStore.$optionPosition()),s(6),f("options",o.projectStore.$optionLevel()))},dependencies:[C,k,x,D,I,z,L,Y,$,F]})};var le=Ie.APPRAISAL_API_URL+"/project",_e=class n{constructor(t){this.http=t}findByCriteriaPaginated(t,e){let o={wrapper:t,pagingInfo:e};return this.http.post(le+"/findByCriteriaPaginated",o)}findProjectAndEmployees(t){let e={id:t};return this.http.post(le+"/findProjectAndEmployees",e)}findProjectById(t,e){let o={id:t,pagingInfo:e};return this.http.post(le+"/findProjectById",o)}save(t){return this.http.post(le+"/save",t)}deleteMapping(t){return this.http.post(le+"/deleteMapping",t)}static \u0275fac=function(e){return new(e||n)(B(Pe))};static \u0275prov=pe({token:n,factory:n.\u0275fac,providedIn:"root"})};var h=class n{constructor(t,e,o,p){this.spinnerService=t;this.projectService=e;this.dialogService=o;this.employeeService=p;this.setSpinner(),this.setSearchCategory()}fb=_(Fe);state={$dataList:d([]),$dataLoading:d(!1),$selectedData:d(null),$loading:d(!1),$pagingInfo:d(new oe),$projectWrapper:d(null),$totalRowCount:d(0),$searchOptions:d([]),$searchOptionsEmployee:d([]),$disabledAdd:d(!1),$disabledEdit:d(!0),$disabledSave:d(!0),$disabledDelete:d(!0),$formMode:d("home"),$employeeWrapper:d(null),$dataListEmployee:d([]),$selectDataEmployee:d(null),$optionDepartment:d([]),$optionPosition:d([]),$optionLevel:d([])};$dataList=this.state.$dataList.asReadonly();$dataLoading=this.state.$dataLoading.asReadonly();$pagingInfo=this.state.$pagingInfo.asReadonly();$totalRowCount=this.state.$totalRowCount.asReadonly();$cols=d([{field:"projectName",header:"Project Name"},{field:"projectManager",header:"Project Manager"},{field:"teamLeader",header:"Team Leader"},{field:"startDate",header:"Start Date",format:"date"},{field:"endDate",header:"End Date",format:"date"},{field:"totalMember",header:"Total Member",format:"center"}]).asReadonly();$projectWrapper=this.state.$projectWrapper.asReadonly();$selectData=this.state.$selectedData.asReadonly();$optionsCategory=this.state.$searchOptions.asReadonly();$optionsCategoryEmployeeList=this.state.$searchOptionsEmployee.asReadonly();$searchForm=d(this.fb.group({category:new c({value:null,disabled:!1}),searchText:new c({value:"",disabled:!1}),startDate:new c({value:null,disabled:!1}),endDate:new c({value:null,disabled:!1})}));$viewForm=d(this.fb.group({projectName:new c({value:"",disabled:!0}),projectManager:new c({value:"",disabled:!0}),teamLeader:new c({value:"",disabled:!0}),totalMember:new c({value:0,disabled:!0}),employeeList:new c({value:[],disabled:!0})}));$projectEditDetailForm=d(this.fb.group({projectName:new c({value:"",disabled:!1}),projectId:new c({value:null,disabled:!0}),projectManager:new c({value:"",disabled:!0}),projectManagerId:new c({value:"",disabled:!0}),teamLeader:new c({value:"",disabled:!0}),teamLeaderId:new c({value:"",disabled:!0}),totalMember:new c({value:0,disabled:!0}),startDate:new c({value:null,disabled:!1}),endDate:new c({value:null,disabled:!1})})).asReadonly();$projectEditDetailAddLookupForm=d(this.fb.group({noEmployee:new c({value:"",disabled:!0}),memberName:new c({value:"",disabled:!0}),department:new c({value:"",disabled:!1}),position:new c({value:"",disabled:!1}),level:new c({value:"",disabled:!1}),startDate:new c({value:null,disabled:!1}),endDate:new c({value:null,disabled:!1})})).asReadonly();$projectEditListForm=d(this.fb.group({startDate:new c({value:null,disabled:!1}),endDate:new c({value:null,disabled:!1})})).asReadonly();$colsEditList=d([{field:"noEmployee",header:"Employee ID"},{field:"fullName",header:"Name"},{field:"departmentDescription",header:"Department"},{field:"positionDescription",header:"Position"},{field:"levelDescription",header:"Level"},{field:"startDate",header:"Start Date",format:"date"},{field:"endDate",header:"End Date",format:"date"}]).asReadonly();$disabledAdd=this.state.$disabledAdd.asReadonly();$disabledEdit=this.state.$disabledEdit.asReadonly();$disabledSave=this.state.$disabledSave.asReadonly();$disabledDelete=this.state.$disabledDelete.asReadonly();$formMode=this.state.$formMode.asReadonly();$dataListEmployee=this.state.$dataListEmployee.asReadonly();$colsEmployee=d([{field:"noEmployee",header:"No Employee"},{field:"fullName",header:"Name"},{field:"directorateDescription",header:"Directorate"},{field:"divisionDescription",header:"Division"},{field:"departmentDescription",header:"Department"},{field:"positionDescription",header:"Position"},{field:"unitDescription",header:"Unit"},{field:"levelDescription",header:"Level"}]).asReadonly();$selectedDataEmployee=this.state.$selectDataEmployee.asReadonly();$optionDepartment=this.state.$optionDepartment.asReadonly();$optionPosition=this.state.$optionPosition.asReadonly();$optionLevel=this.state.$optionLevel.asReadonly();ref;setSpinner(){Te(this.state.$loading).subscribe(t=>t?this.spinnerService.show():this.spinnerService.hide())}onLazyLoad(t){let e=this.state.$pagingInfo();e.currentPage=Math.floor(t.first/t.rows)+1,e.pageSize=t.rows,this.state.$pagingInfo.set(e),this.populateList()}populateList(t){this.state.$dataLoading.set(!0);let e=t||new te;this.state.$dataList.set([]),this.state.$formMode()==="home"?this.findByCriteriaPaginated(e):this.state.$formMode()==="edit"?this.findProjectAndEmployees(this.$selectData()?.id,"edit"):this.state.$formMode()==="new"&&(this.state.$dataLoading.set(!1),this.state.$pagingInfo.set(new oe),this.state.$totalRowCount.set(0),this.state.$dataList.set([]))}findByCriteriaPaginated(t){this.projectService.findByCriteriaPaginated(t,this.state.$pagingInfo()).subscribe(e=>{e.status?(this.state.$pagingInfo.set(e.object.pagingInfo),this.state.$totalRowCount.set(e.object.totalRowCount),this.state.$dataList.set(e.object.dataList)):console.error("Failed to fetch project dataList."),this.state.$dataLoading.set(!1)},e=>{this.state.$dataLoading.set(!1),console.error("Error fetching project dataList:",e)})}setSearchCategory(){this.state.$searchOptions.set([{label:"Semua",value:null},{label:"Project Name",value:"projectName"},{label:"Project Manager",value:"projectManager"}])}setSearchCategoryEmployee(){this.state.$searchOptionsEmployee.set([{label:"Semua",value:null},{label:"Employee ID",value:"noEmployee"},{label:"Name",value:"fullName"},{label:"Position",value:"positionDescription"}])}onClickSearch(){let t=new te;this.$searchForm()?.value?.category==="projectName"?t.projectName=this.$searchForm().value.searchText:this.$searchForm()?.value?.category==="projectManager"&&(t.projectManager=this.$searchForm().value.searchText),this.$searchForm()?.value?.startDate&&(t.startDate=this.$searchForm()?.value?.startDate),this.$searchForm()?.value?.endDate&&(t.endDate=this.$searchForm()?.value?.endDate),this.populateList(t)}onClickResetSearch(){this.$searchForm().reset()}onClickAddProject(){this.state.$formMode.set("new")}resetForm(t){let e=this.$projectEditDetailForm();t.forEach(o=>{e.get(o)?.reset(),e.get(o)?.disable()})}resetAllForm(){this.$projectEditDetailForm().reset({projectName:"",projectManager:"",teamLeader:null,totalMember:0})}setFormMode(t){this.state.$formMode.set(t)}onClickEdit(t){this.state.$selectedData.set(t),this.state.$pagingInfo.set(new oe),this.findProjectAndEmployees(t.id,"edit")}onClickView(t){this.findProjectAndEmployees(t.id,"view")}openViewLookup(){this.ref=this.dialogService.open(ce,{modal:!0}),this.ref.onClose.subscribe(t=>{})}findProjectAndEmployees(t,e){if(e==="view"){let o=this.state.$pagingInfo();o.retrieveAll=!0,this.state.$pagingInfo.set(o)}this.projectService.findProjectAndEmployees(t).subscribe(o=>{if(o.status){let p=o.object;if(e==="view"){this.$viewForm().patchValue({projectName:p.projectName,projectManager:p.projectManager,teamLeader:p.teamLeadName,totalMember:p.totalMember,employeeList:p.employeePaginatedListResponse.dataList});let u=this.state.$pagingInfo();u.retrieveAll=!1,this.state.$pagingInfo.set(u),this.openViewLookup()}else e==="edit"&&(this.$projectEditDetailForm().patchValue({projectName:p.projectName,projectManager:p.projectManager,teamLeader:p.teamLeadName,totalMember:p.totalMember}),this.state.$dataList.set(o.object.employeePaginatedListResponse.dataList),this.state.$pagingInfo.set(o.object.pagingInfo),this.state.$totalRowCount.set(o.object.totalRowCount),this.setFormMode("edit"))}else console.error("Failed to fetch project detail project.");this.state.$dataLoading.set(!1)},o=>{this.state.$dataLoading.set(!1),console.error("Error fetching project  detail project:",o)})}onClickLookupTeamLeader(t){this.getEmployeeList(),this.ref=this.dialogService.open(ue,{header:"Employee List",modal:!0}),this.ref.onClose.subscribe(e=>{this.$searchForm().reset(),e&&(t==="projectManager"?this.$projectEditDetailForm().patchValue({projectManager:e.fullName,projectManagerId:e.noEmployee}):t==="teamLeader"?this.$projectEditDetailForm().patchValue({teamLeader:e.fullName,teamLeaderId:e.noEmployee}):this.$projectEditDetailAddLookupForm().patchValue({memberName:e.fullName,noEmployee:e.noEmployee}))})}getEmployeeList(){this.state.$dataListEmployee.set([]),this.state.$dataLoading.set(!0);let t={wrapper:this.state.$employeeWrapper(),pagingInfo:this.state.$pagingInfo(),totalRowCount:this.state.$totalRowCount()};this.employeeService.getEmployeeList(t).subscribe(e=>{if(e.status){let o=e.object.dataList;this.state.$dataListEmployee.set(o),this.state.$pagingInfo.set(e.object.pagingInfo),this.state.$totalRowCount.set(e.object.totalRowCount||0)}else console.error("Failed to fetch employee list.");this.state.$dataLoading.set(!1)},e=>{console.error("Error fetching employee list:",e)})}populateListEmployee(t){this.state.$dataLoading.set(!0);let e=t||new ie;this.state.$employeeWrapper.set(e),this.getEmployeeList()}onLazyLoadEmployee(t){let e=this.state.$pagingInfo();e.currentPage=Math.floor(t.first/t.rows)+1,e.pageSize=t.rows,this.state.$pagingInfo.set(e),this.populateListEmployee()}onClickAddMember(){this.$projectEditDetailAddLookupForm().reset(),this.ref=this.dialogService.open(ae,{header:"Add Member",modal:!0}),this.ref.onClose.subscribe(t=>{if(t){let e=new ie;e.noEmployee=this.$projectEditDetailAddLookupForm().get("noEmployee")?.value,e.projectId=this.$projectEditDetailForm().get("projectId")?.value,e.departmentId=this.$projectEditDetailAddLookupForm().get("department")?.value,e.positionId=this.$projectEditDetailAddLookupForm().get("position")?.value,e.levelId=this.$projectEditDetailAddLookupForm().get("level")?.value,e.startEmpDate=this.$projectEditDetailAddLookupForm().get("startDate")?.value,e.endEmpDate=this.$projectEditDetailAddLookupForm().get("endDate")?.value,this.employeeService.updateProject(e).subscribe(o=>{o.status?this.populateList():console.error("Failed to fetch ")},o=>{console.error("Error fetching ")})}})}onClickSaveProject(){let t=new te;t.id=this.$projectEditDetailForm().get("projectId")?.value,t.projectName=this.$projectEditDetailForm().get("projectName")?.value,t.projectManagerId=this.$projectEditDetailForm().get("projectManagerId")?.value,t.teamLeaderId=this.$projectEditDetailForm().get("teamLeaderId")?.value,this.projectService.save(t).subscribe(e=>{e.status?(this.$projectEditDetailForm().patchValue({projectId:e.object.id,projectName:e.object.projectName,projectManagerId:e.object.projectManagerId,teamLeaderId:e.object.teamLeaderId}),this.populateList()):console.error("Failed to fetch ")},e=>{console.error("Error fetching position list:",e)})}onClickBack(){this.setFormMode("home"),this.state.$pagingInfo.set(new oe),this.$projectEditDetailForm().reset()}setOptionDepartment(){this.employeeService.getDepartmentList().subscribe(t=>{if(t.status){let e=t.object.map(o=>({label:o.label,value:o.value}));this.state.$optionDepartment.set(e)}else console.error("Failed to fetch department list:",t.message)},t=>{console.error("Error fetching department list:",t)})}setOptionPosition(){this.employeeService.getPositionList().subscribe(t=>{if(t.status){let e=t.object.map(o=>({label:o.label,value:o.value}));this.state.$optionPosition.set(e)}else console.error("Failed to fetch position list:",t.message)},t=>{console.error("Error fetching position list:",t)})}setOptionLevel(){this.employeeService.getLevelList().subscribe(t=>{if(t.status){let e=t.object.map(o=>({label:o.label,value:o.value}));this.state.$optionLevel.set(e)}else console.error("Failed to fetch level list:",t.message)},t=>{console.error("Error fetching level list:",t)})}onClickEditMember(t){this.$projectEditDetailAddLookupForm().reset(),this.$projectEditDetailAddLookupForm().patchValue({noEmployee:t.noEmployee,memberName:t.fullName,position:t.position,level:t.level,startDate:t.startDate,endDate:t.endDate}),this.ref=this.dialogService.open(ae,{header:"Add Member",modal:!0}),this.ref.onClose.subscribe(e=>{if(e){let o=new ie;o.noEmployee=this.$projectEditDetailAddLookupForm().get("noEmployee")?.value,o.projectId=this.$projectEditDetailForm().get("projectId")?.value,o.positionId=this.$projectEditDetailAddLookupForm().get("position")?.value,o.levelId=this.$projectEditDetailAddLookupForm().get("level")?.value,o.startEmpDate=this.$projectEditDetailAddLookupForm().get("startDate")?.value,o.endEmpDate=this.$projectEditDetailAddLookupForm().get("endDate")?.value,this.employeeService.updateProject(o).subscribe(p=>{p.status?this.populateList():console.error("Failed to fetch ")},p=>{console.error("Error fetching ")})}})}onClickDeleteMember(t){let e=new ie;e.noEmployee=t.noEmployee,e.projectId=this.$projectEditDetailForm().get("projectId")?.value,this.projectService.deleteMapping(e).subscribe(o=>{o.status?this.populateList():console.error("Failed to fetch ")},o=>{console.error("Error fetching position list:",o)})}static \u0275fac=function(e){return new(e||n)(B(xe),B(_e),B(de),B(Me))};static \u0275prov=pe({token:n,factory:n.\u0275fac})};var et=(n,t)=>t.field,tt=()=>({"min-width":"50rem"}),ot=()=>[5,10,20];function it(n,t){n&1&&(i(0,"tr")(1,"td",16)(2,"div"),l(3,"Loading data..."),r()()())}function nt(n,t){if(n&1&&(i(0,"th",18),l(1),r()),n&2){let e=t.$implicit;s(),S(" ",e.header," ")}}function rt(n,t){if(n&1&&(i(0,"tr"),E(1,nt,2,1,"th",17),i(2,"th"),l(3," Action "),r()()),n&2){let e=t.$implicit;s(),f("ngForOf",e)}}function at(n,t){if(n&1&&(i(0,"td",23),l(1),r()),n&2){let e=g().$implicit,o=g().$implicit;s(),w(o[e.field])}}function lt(n,t){if(n&1&&(i(0,"td"),l(1),U(2,"date"),r()),n&2){let e=g().$implicit,o=g().$implicit;s(),w(H(2,1,o[e.field],"dd/MM/yyyy"))}}function pt(n,t){if(n&1&&(i(0,"td"),l(1),r()),n&2){let e=g().$implicit,o=g().$implicit;s(),w(o[e.field])}}function st(n,t){if(n&1&&E(0,at,2,1,"td",23)(1,lt,3,4,"td")(2,pt,2,1,"td"),n&2){let e=t.$implicit;V(e.format==="center"?0:e.format==="date"?1:2)}}function mt(n,t){if(n&1){let e=T();i(0,"tr",19),O(1,st,3,1,null,null,et),i(3,"td",20)(4,"p-button",21),m("onClick",function(){let p=j(e).$implicit,u=g();return v(u.projectStore.onClickEdit(p))}),r(),i(5,"p-button",22),m("onClick",function(){let p=j(e).$implicit,u=g();return v(u.projectStore.onClickView(p))}),r()()()}if(n&2){let e=t.$implicit,o=t.columns;f("pSelectableRow",e),s(),G(o)}}var je=class n{projectStore=_(h);visibleViewLookup=!1;static \u0275fac=function(e){return new(e||n)};static \u0275cmp=y({type:n,selectors:[["app-project-list"]],standalone:!0,features:[b],decls:22,vars:14,consts:[["header",""],["body",""],["header","Project List"],[1,"appraisal-search","grid","grid-cols-12","gap-4",3,"formGroup"],[1,"col-span-3"],["formControlName","category","placeholder","Search By",1,"w-full",3,"options"],[1,"col-span-9","md:col-span-9"],["pInputText","","formControlName","searchText","name","search"],["label","Search","icon","pi pi-search",3,"onClick"],["label","Reset","icon","pi pi-refresh","severity","info",3,"onClick"],[1,"grid","grid-cols-12","gap-4"],[1,"col-span-10"],[1,"col-span-2","flex","justify-end","space-x-1"],["label","Add Project","icon","pi pi-plus","severity","contrast",3,"onClick"],["stripedRows","","showGridlines","",3,"onLazyLoad","value","tableStyle","columns","loading","lazy","paginator","rows","rowsPerPageOptions","paginatorDropdownAppendTo","totalRecords"],["pTemplate","loadingbody"],["colspan","7",1,"text-center"],["class","!text-center",4,"ngFor","ngForOf"],[1,"!text-center"],[3,"pSelectableRow"],[1,"gap-2","flex","justify-center"],["styleClass","p-button-info","icon","pi pi-pencil","pTooltip","Edit",3,"onClick"],["styleClass","p-button-contrast","icon","pi pi-eye","pTooltip","View",3,"onClick"],[2,"text-align","center"]],template:function(e,o){if(e&1){let p=T();i(0,"p-panel",2)(1,"div",3)(2,"div",4),a(3,"p-select",5),r(),i(4,"p-inputgroup",6),a(5,"input",7),i(6,"p-inputgroup-addon")(7,"p-button",8),m("onClick",function(){return j(p),v(o.projectStore.onClickSearch())}),r()(),i(8,"p-inputgroup-addon")(9,"p-button",9),m("onClick",function(){return j(p),v(o.projectStore.onClickResetSearch())}),r()()()(),a(10,"br"),i(11,"div",10),a(12,"div",11),i(13,"div",12)(14,"p-button",13),m("onClick",function(){return j(p),v(o.projectStore.onClickAddProject())}),r()()(),a(15,"br"),i(16,"p-table",14),m("onLazyLoad",function(A){return j(p),v(o.projectStore.onLazyLoad(A))}),E(17,it,4,0,"ng-template",15)(18,rt,4,1,"ng-template",null,0,N)(20,mt,6,1,"ng-template",null,1,N),r()()}if(e&2){let p=q(21);s(),f("formGroup",o.projectStore.$searchForm()),s(2),f("options",o.projectStore.$optionsCategory()),s(13),f("value",o.projectStore.$dataList())("tableStyle",M(12,tt))("columns",o.projectStore.$cols())("loading",o.projectStore.$dataLoading())("lazy",!0)("paginator",!0)("rows",5)("rowsPerPageOptions",M(13,ot))("paginatorDropdownAppendTo",p)("totalRecords",o.projectStore.$totalRowCount())}},dependencies:[C,P,X,k,x,D,I,z,L,Z,ee,K,ke,se,me,$,F,Q]})};var ve=class n{projectStore=_(h);onResetClick(){this.projectStore.resetAllForm()}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=y({type:n,selectors:[["app-project-edit-detail"]],standalone:!0,features:[b],decls:45,vars:1,consts:[["header","Project Detail"],[1,"grid","grid-cols-12","gap-2",3,"formGroup"],[1,"col-span-2","flex"],[1,"break-words"],[1,"col-span-6"],["type","text","pInputText","","formControlName","projectName",1,"w-full","p-2","border","rounded-md"],[1,"col-span-4"],["type","text","pInputText","","formControlName","projectManager",1,"w-full","p-2","border","rounded-md"],[1,"col-span-1"],["icon","pi pi-search",3,"onClick"],[1,"col-span-3"],["type","text","pInputText","","formControlName","teamLeader",1,"w-full","p-2","border","rounded-md"],["type","text","pInputText","","formControlName","totalMember",1,"w-full","p-2","border","rounded-md"],["formControlName","startDate","appendTo","body"],["formControlName","endDate","appendTo","body"],[1,"flex","justify-end","space-x-1"],["label","Save","icon","pi pi-check","severity","success",3,"onClick"],["label","Back","icon","pi pi-sign-out","severity","danger",3,"onClick"]],template:function(e,o){e&1&&(i(0,"p-panel",0)(1,"div",1)(2,"div",2)(3,"p",3),l(4,"Project Name"),r()(),i(5,"div",4),a(6,"input",5),r(),a(7,"div",6),i(8,"div",2)(9,"p",3),l(10,"Project Manager /"),a(11,"br"),l(12,"Penanggung Jawab"),r()(),i(13,"div",4),a(14,"input",7),r(),i(15,"div",8)(16,"p-button",9),m("onClick",function(){return o.projectStore.onClickLookupTeamLeader("projectManager")}),r()(),a(17,"div",10),i(18,"div",2)(19,"p",3),l(20,"Team Leader"),r()(),i(21,"div",4),a(22,"input",11),r(),i(23,"div",8)(24,"p-button",9),m("onClick",function(){return o.projectStore.onClickLookupTeamLeader("teamLeader")}),r()(),a(25,"div",10),i(26,"div",2)(27,"p",3),l(28,"Total of Member"),r()(),i(29,"div",4),a(30,"input",12),r(),a(31,"div",6),i(32,"div",2)(33,"p",3),l(34,"Start Date"),r()(),i(35,"div",10),a(36,"p-datepicker",13),r(),i(37,"div",8)(38,"p",3),l(39,"End Date"),r()(),i(40,"div",10),a(41,"p-datepicker",14),r()(),i(42,"div",15)(43,"p-button",16),m("onClick",function(){return o.projectStore.onClickSaveProject()}),r(),i(44,"p-button",17),m("onClick",function(){return o.projectStore.onClickBack()}),r()()()),e&2&&(s(),f("formGroup",o.projectStore.$projectEditDetailForm()))},dependencies:[C,P,k,x,D,I,L,Y,$,F]})};var dt=(n,t)=>t.field,ct=()=>({"min-width":"50rem"}),ut=()=>[5,10,20];function ft(n,t){n&1&&(i(0,"tr")(1,"td",20)(2,"div"),l(3,"Loading data..."),r()()())}function gt(n,t){if(n&1&&(i(0,"th",22),l(1),r()),n&2){let e=t.$implicit;s(),S(" ",e.header," ")}}function _t(n,t){if(n&1&&(i(0,"tr"),E(1,gt,2,1,"th",21),i(2,"th"),l(3," Action "),r()()),n&2){let e=t.$implicit;s(),f("ngForOf",e)}}function jt(n,t){if(n&1&&(i(0,"td",26),l(1),r()),n&2){let e=g().$implicit,o=g().$implicit;s(),w(o[e.field])}}function vt(n,t){if(n&1&&(i(0,"td"),l(1),U(2,"date"),r()),n&2){let e=g().$implicit,o=g().$implicit;s(),w(H(2,1,o[e.field],"dd/MM/yyyy"))}}function ht(n,t){if(n&1&&(i(0,"td"),l(1),r()),n&2){let e=g().$implicit,o=g().$implicit;s(),w(o[e.field])}}function yt(n,t){if(n&1&&E(0,jt,2,1,"td",26)(1,vt,3,4,"td")(2,ht,2,1,"td"),n&2){let e=t.$implicit;V(e.format==="center"?0:e.format==="date"?1:2)}}function bt(n,t){if(n&1){let e=T();i(0,"tr",23),O(1,yt,3,1,null,null,dt),i(3,"td")(4,"p-button",24),m("onClick",function(){let p=j(e).$implicit,u=g();return v(u.projectStore.onClickEditMember(p))}),r(),l(5," \xA0 "),i(6,"p-button",25),m("onClick",function(){let p=j(e).$implicit,u=g();return v(u.projectStore.onClickDeleteMember(p))}),r()()()}if(n&2){let e=t.$implicit,o=t.columns;f("pSelectableRow",e),s(),G(o)}}var he=class n{projectStore=_(h);visibleViewLookup=!1;static \u0275fac=function(e){return new(e||n)};static \u0275cmp=y({type:n,selectors:[["app-project-edit-list"]],standalone:!0,features:[b],decls:32,vars:15,consts:[["header",""],["body",""],["header","Project List"],[1,"appraisal-search","grid","grid-cols-12","gap-4",3,"formGroup"],[1,"col-span-3"],["formControlName","category","placeholder","Search By",1,"w-full",3,"options"],[1,"col-span-9","md:col-span-9"],["pInputText","","formControlName","searchText","name","search"],["label","Search","icon","pi pi-search",3,"onClick"],["label","Reset","icon","pi pi-refresh","severity","info",3,"onClick"],[1,"col-span-1"],[1,"break-words"],["formControlName","startDate","appendTo","body"],["formControlName","endDate","appendTo","body"],[1,"grid","grid-cols-12","gap-4"],[1,"col-span-10"],[1,"col-span-2","flex","justify-end","space-x-1"],["icon","pi pi-plus","label","Add Member","severity","contrast",3,"onClick"],["stripedRows","","showGridlines","","selectionMode","single",3,"onLazyLoad","value","tableStyle","columns","loading","lazy","paginator","selection","rows","rowsPerPageOptions","paginatorDropdownAppendTo","totalRecords"],["pTemplate","loadingbody"],["colspan","11",1,"text-center"],["class","!text-center",4,"ngFor","ngForOf"],[1,"!text-center"],[3,"pSelectableRow"],["label","Edit",3,"onClick"],["label","Delete",3,"onClick"],[2,"text-align","center"]],template:function(e,o){if(e&1){let p=T();i(0,"p-panel",2)(1,"div",3)(2,"div",4),a(3,"p-select",5),r(),i(4,"p-inputgroup",6),a(5,"input",7),i(6,"p-inputgroup-addon")(7,"p-button",8),m("onClick",function(){return j(p),v(o.projectStore.onClickSearch())}),r()(),i(8,"p-inputgroup-addon")(9,"p-button",9),m("onClick",function(){return j(p),v(o.projectStore.onClickResetSearch())}),r()()(),i(10,"div",10)(11,"p",11),l(12,"Start Date"),r()(),i(13,"div",4),a(14,"p-datepicker",12),r(),i(15,"div",10)(16,"p",11),l(17,"End Date"),r()(),i(18,"div",4),a(19,"p-datepicker",13),r()(),a(20,"br"),i(21,"div",14),a(22,"div",15),i(23,"div",16)(24,"p-button",17),m("onClick",function(){return j(p),v(o.projectStore.onClickAddMember())}),r()()(),a(25,"br"),i(26,"p-table",18),m("onLazyLoad",function(A){return j(p),v(o.projectStore.onLazyLoad(A))}),E(27,ft,4,0,"ng-template",19)(28,_t,4,1,"ng-template",null,0,N)(30,bt,7,1,"ng-template",null,1,N),r()()}if(e&2){let p=q(31);s(),f("formGroup",o.projectStore.$searchForm()),s(2),f("options",o.projectStore.$optionsCategoryEmployeeList()),s(23),f("value",o.projectStore.$dataList())("tableStyle",M(13,ct))("columns",o.projectStore.$colsEditList())("loading",o.projectStore.$dataLoading())("lazy",!0)("paginator",!0)("selection",o.projectStore.$selectedDataEmployee())("rows",5)("rowsPerPageOptions",M(14,ut))("paginatorDropdownAppendTo",p)("totalRecords",o.projectStore.$totalRowCount())}},dependencies:[C,P,X,k,x,D,I,z,L,Z,ee,K,se,me,Y,$,F,Q]})};var ye=class n{projectStore=_(h);ngOnInit(){this.projectStore.setSearchCategoryEmployee(),this.projectStore.setOptionLevel(),this.projectStore.setOptionPosition()}onResetClick(){this.projectStore.resetAllForm()}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=y({type:n,selectors:[["app-project-edit"]],standalone:!0,features:[b],decls:3,vars:0,template:function(e,o){e&1&&a(0,"app-project-edit-detail")(1,"br")(2,"app-project-edit-list")},dependencies:[C,ve,he]})};function Ct(n,t){n&1&&a(0,"app-project-list")}function St(n,t){n&1&&a(0,"app-project-edit")}var Ve=class n{projectStore=_(h);constructor(){}ngOnInit(){}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=y({type:n,selectors:[["app-employee"]],standalone:!0,features:[we([h,de,W]),b],decls:4,vars:1,consts:[["header","Project Mapping"],[1,"mt-6"]],template:function(e,o){e&1&&(i(0,"p-panel",0)(1,"div",1),E(2,Ct,1,0,"app-project-list")(3,St,1,0,"app-project-edit"),r()()),e&2&&(s(2),V(o.projectStore.$formMode()==="home"?2:3))},dependencies:[C,P,je,ye]})};export{Ve as ProjectComponent};

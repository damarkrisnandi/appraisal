import{g as ce}from"./chunk-7U4M7FLE.js";import{A as ge,C as z,E as _,g as me,l as ue,q as fe,r as Se,u as ke}from"./chunk-A37O4IKQ.js";import{m as v,o as G,s as ye}from"./chunk-3TPTQGFG.js";import"./chunk-4YRY4IP2.js";import"./chunk-42ATNSVF.js";import"./chunk-5H45J4QU.js";import{a as Y}from"./chunk-OQKDZ6KP.js";import{a as he,c as A,f as N,g as B,h as O,i as T,l as K,m as V}from"./chunk-DDUXGODL.js";import{a as se}from"./chunk-MQPYQJ3G.js";import{ka as X,oa as pe,va as de,wa as j}from"./chunk-DG77JJ4B.js";import{m as P}from"./chunk-O2IJJLQI.js";import{Ab as d,Bb as m,Kb as W,La as te,Lb as h,Nb as D,Ob as ne,Pa as n,Sb as re,Tb as b,Ub as I,Ya as r,_ as R,da as f,ea as k,eb as y,ec as E,gb as ie,hb as c,ia as g,lb as w,mb as L,nb as ae,pb as le,qb as oe,rb as o,sa as $,sb as l,ta as F,tb as p,uc as C,xb as Q}from"./chunk-ZIXU4GN5.js";var x=he.APPRAISAL_API_URL+"/technical-skill-indicator",H=class i{constructor(t){this.http=t}findByCriteriaPaginated(t){return this.http.post(x+"/findByCriteriaPaginated",t)}save(t){return this.http.post(x+"/save",t)}getCategory(){return this.http.get(x+"/category/list")}getMetric(){return this.http.get(x+"/metric-type/list")}delete(t){return this.http.delete(x+"/delete/"+t)}static \u0275fac=function(e){return new(e||i)(f(se))};static \u0275prov=R({token:i,factory:i.\u0275fac,providedIn:"root"})};var u=class i{constructor(t,e,a,s,S,ee){this.spinnerService=t;this.messageService=e;this.router=a;this.confirmationService=s;this.confirmDialog=S;this.techSkillService=ee;this.init()}state={$dataList:r([]),$dataLoading:r(!1),$pagingInfo:r(new Y),$totalRowCount:r(1),$selectedData:r(null),$selectedVerified:r(!0),$loading:r(!1),$disabledTable:r(!1),$optionsFilter:r([]),$selectedFilter:r(""),$searchText:r(""),$searchBtnClickEvent:r(!1),$optionsCategory:r([]),$optionsMetricType:r([]),$descMetricType:r([]),$disabledUpdate:r(!0),$disabledSave:r(!0),$disabledCancel:r(!0),$formMode:r("idle"),$header:r("Daftar List Technical Skill")};$dataList=this.state.$dataList.asReadonly();$dataLoading=this.state.$dataLoading.asReadonly();$selectedData=this.state.$selectedData.asReadonly();$cols=r([{header:"No",class_td:"!text-center",type:"number"},{field:"skillCategory",header:"Kategori Keahlian",class_td:"!text-center"},{field:"techSkill",header:"Keahlian Teknis",class_td:"!text-center"},{field:"metricType",header:"Type of Metrics",class_td:"!text-center"},{field:"action",header:"Actions",class_td:"flex justify-center items-center gap-2",type:"action"}]).asReadonly();$pagingInfo=this.state.$pagingInfo.asReadonly();$totalRowCount=this.state.$totalRowCount.asReadonly();$optionsFilter=this.state.$optionsFilter.asReadonly();$selectedFilter=this.state.$selectedFilter.asReadonly();$searchText=this.state.$searchText.asReadonly();$filter=C(()=>{let t=null;t={};let e;return e=this.$searchText()??"",t.techSkill=e,t});$optionsCategory=this.state.$optionsCategory.asReadonly();$optionsMetricType=this.state.$optionsMetricType.asReadonly();$descMetricType=this.state.$descMetricType.asReadonly();$disabledSave=C(()=>this.state.$disabledSave()&&this.state.$formMode()=="idle");$disabledCancel=C(()=>this.state.$disabledCancel()&&this.state.$formMode()=="idle");$disabledTable=C(()=>this.state.$formMode()=="edit");$formMode=this.state.$formMode.asReadonly();$header=this.state.$header.asReadonly();init(){this.setSpinner(),this.populateList(),this.setSearchFilter(),this.generateCategory(),this.generateMetric()}setSpinner(){j(this.state.$loading).subscribe(t=>t?this.spinnerService.show():this.spinnerService.hide())}populateList(){this.state.$dataLoading.set(!0);let t={wrapper:this.$filter(),pagingInfo:this.state.$pagingInfo(),totalRowCount:this.state.$totalRowCount()};this.techSkillService.findByCriteriaPaginated(t).subscribe(e=>{e.status&&(this.state.$pagingInfo.set(e.object.pagingInfo||new Y),this.state.$dataList.set(e.object.dataList||[]),this.state.$totalRowCount.set(e.object.totalRowCount||0)),this.state.$dataLoading.set(!1)})}onLazyLoad(t){this.populateList()}setSearchFilter(){this.state.$optionsFilter.set([{label:"Semua",value:null},{label:"Kategori",value:"category"},{label:"Keahlian Teknis",value:"techSkill"},{label:"Type of Metric",value:"metricType"}])}generateCategory(){let t=[];this.techSkillService.getCategory().subscribe(e=>{e.status&&e.object.map(a=>{t.push({value:a.id,label:a.name})})}),this.state.$optionsCategory.set(t)}generateMetric(){let t=[],e=[];this.techSkillService.getMetric().subscribe(a=>{a.status&&a.object.map(s=>{t.push({value:s.id,label:s.name}),e.push(s)})}),this.state.$optionsMetricType.set(t),this.state.$descMetricType.set(e)}resetState(){this.state.$dataList.set([]),this.state.$dataLoading.set(!1),this.state.$selectedData.set(null),this.state.$loading.set(!1),this.state.$searchText.set(""),this.state.$searchBtnClickEvent.set(!1)}onSearchBtnClicked({filter:t,search:e}){this.state.$selectedFilter.set(t),t&&this.state.$searchText.set(e),this.populateList()}onRefreshSearchClicked(){this.state.$searchText.set(""),this.state.$searchBtnClickEvent.set(!1),this.populateList()}onAddTechSkill(){this.resetState(),this.state.$formMode.set("add"),this.state.$header.set("Technical Skill Form")}editAction(t){this.state.$selectedData.set(t),this.state.$formMode.set("edit"),this.state.$header.set("Technical Skill Form")}onSaveFormAdd(t){this.techSkillService.save(t).subscribe(e=>{e.status?(this.confirmDialog.confirm({message:`Berhasil ${this.state.$formMode()=="add"?"menambahkan":"update"} data technical skill!`,header:"Success",key:"ok",icon:"pi pi-check-circle",accept:()=>{this.state.$formMode.set("idle"),this.state.$header.set("Daftar List Technical Skill ")}}),this.populateList()):this.messageService.add({severity:"error",summary:"Error",detail:`Failed to ${this.state.$formMode()=="add"?"save":"update"} data.`})},e=>{this.messageService.add({severity:"warn",summary:"Perhatian",detail:`Error ${this.state.$formMode()=="add"?"save":"update"} data.`})})}onCancelFormAdd(){this.resetState(),this.state.$formMode.set("idle"),this.state.$header.set("Daftar List Technical Skill ")}deleteAction(t){this.state.$selectedData.set(t),this.confirmationService.confirm({header:"Konfirmasi",message:"Apakah Anda yakin ingin menghapus indicator ini?",accept:()=>{this.techSkillService.delete(t.id).subscribe(e=>{if(e.status){let a=`Hapus data ${this.$selectedData()?.techSkill} berhasil!`;this.messageService.add({severity:"success",summary:"Success",detail:a}),this.state.$formMode.set("idle"),this.state.$header.set("Daftar List Technical Skill "),this.state.$selectedData.set(null),this.populateList()}else this.messageService.add({severity:"error",summary:"Error",detail:e.message});this.populateList()})},reject:()=>{}})}static \u0275fac=function(e){return new(e||i)(f(de),f(pe),f(ce),f(X),f(X),f(H))};static \u0275prov=R({token:i,factory:i.\u0275fac})};var U=class i{techSkillStore=k(u);filter=this.techSkillStore.$optionsFilter();selectedFilter=this.techSkillStore.$selectedFilter();search=this.techSkillStore.$searchText();searchForm=new O({filter:new T({value:null,disabled:!1}),search:new T({value:"",disabled:!1})});tempSearch={filter:null,search:""};onFilterChanges(){this.searchForm.controls.filter.valueChanges.subscribe(t=>{this.tempSearch.filter=t,this.searchForm.get("search")?.reset(),t?this.searchForm.get("search")?.enable():this.searchForm.get("search")?.disable()})}onSearchChanges(){this.searchForm.controls.search.valueChanges.subscribe(t=>{this.tempSearch.search=t})}onButtonClicked(){this.techSkillStore.onSearchBtnClicked(this.tempSearch)}onRefreshSearch(){this.searchForm.patchValue({filter:null}),this.techSkillStore.onSearchBtnClicked(this.tempSearch)}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=g({type:i,selectors:[["app-technical-skill-search"]],standalone:!0,features:[b],decls:8,vars:2,consts:[[1,"grid","grid-cols-6","grid-flow-rows","gap-2",3,"formGroup"],["styleClass","col-span-6 md:col-span-1","formControlName","filter","name","filter","appendTo","body",3,"options"],[1,"col-span-6","md:col-span-5"],["pInputText","","formControlName","search","name","search"],["icon","pi pi-search",1,"w-full","!h-full",3,"click"],["icon","pi pi-refresh","severity","info",1,"w-full","!h-full",3,"click"]],template:function(e,a){e&1&&(o(0,"div",0),p(1,"p-dropdown",1),o(2,"p-inputgroup",2),p(3,"input",3),o(4,"p-inputgroup-addon")(5,"p-button",4),d("click",function(){return a.onButtonClicked()}),l()(),o(6,"p-inputgroup-addon")(7,"p-button",5),d("click",function(){return a.onRefreshSearch()}),l()()()()),e&2&&(c("formGroup",a.searchForm),n(),c("options",a.techSkillStore.$optionsFilter()))},dependencies:[_,A,N,B,G,v,ge,ye,z,K,V]})};var we=()=>[5,10,20];function xe(i,t){if(i&1&&(o(0,"th",10),h(1),l()),i&2){let e=t.$implicit;n(),D(" ",e.header," ")}}function Me(i,t){if(i&1&&(o(0,"tr"),y(1,xe,2,1,"th",9),l()),i&2){let e=t.$implicit;n(),c("ngForOf",e)}}function Re(i,t){if(i&1&&(o(0,"td"),h(1),l()),i&2){let e=m().$implicit,a=m().rowIndex;w(e.class_td),n(),D(" ",a+1," ")}}function Le(i,t){if(i&1&&(o(0,"td"),p(1,"div",13),l()),i&2){let e=m().$implicit,a=m().$implicit;w(e.class_td),n(),c("outerHTML",e.template(a[e.field]),te)}}function De(i,t){if(i&1){let e=Q();o(0,"td")(1,"p-button",14),d("click",function(){$(e);let s=m(2).$implicit,S=m();return F(S.techSkillStore.editAction(s))}),l(),o(2,"p-button",15),d("click",function(){$(e);let s=m(2).$implicit,S=m();return F(S.techSkillStore.deleteAction(s))}),l()()}if(i&2){let e=m().$implicit;w(e.class_td)}}function Ie(i,t){if(i&1&&(o(0,"td"),h(1),l()),i&2){let e=m().$implicit,a=m().$implicit;w(e.class_td),n(),D(" ",a[e.field].name?a[e.field].name:a[e.field]," ")}}function Ee(i,t){if(i&1&&y(0,Re,2,3,"td",12)(1,Le,2,3,"td",12)(2,De,3,2,"td",12)(3,Ie,2,3,"td",12),i&2){let e,a=t.$implicit;L((e=a.type)==="number"?0:e==="custom"?1:e==="action"?2:3)}}function Pe(i,t){if(i&1&&(o(0,"tr",11),le(1,Ee,4,1,null,null,ae),l()),i&2){let e=t.$implicit,a=t.columns;c("pSelectableRow",e),n(),oe(a)}}function je(i,t){if(i&1&&(o(0,"tr")(1,"td",16),h(2,"Data Kosong"),l()()),i&2){let e=m();n(),ie("colspan",e.techSkillStore.$cols().length)}}var q=class i{techSkillStore=k(u);static \u0275fac=function(e){return new(e||i)};static \u0275cmp=g({type:i,selectors:[["app-technical-skill-list"]],standalone:!0,features:[b],decls:13,vars:12,consts:[["dt",""],["header",""],["body",""],["emptymessage",""],[1,"card"],[1,"flex","justify-end","items-center","gap-1","flex-col","md:flex-row","mb-2","w-full"],["styleClass","p-button-contrast w-full","icon","pi pi-plus","label","Tambah Keahlian Teknis",3,"click"],["showGridlines","",3,"onLazyLoad","columns","value","loading","paginator","rows","rowsPerPageOptions","paginatorDropdownAppendTo","lazy","totalRecords"],[3,"blocked","target"],["class","!text-center",4,"ngFor","ngForOf"],[1,"!text-center"],[3,"pSelectableRow"],[3,"class"],[3,"outerHTML"],["styleClass","p-button-info","icon","pi pi-pencil","pTooltip","Ubah Data","tooltipPosition","bottom",3,"click"],["styleClass","p-button-danger","icon","pi pi-trash","pTooltip","Hapus Data","tooltipPosition","bottom",3,"click"],[1,"!text-center","w-full"]],template:function(e,a){if(e&1){let s=Q();o(0,"div",4)(1,"div",5)(2,"p-button",6),d("click",function(){return $(s),F(a.techSkillStore.onAddTechSkill())}),l(),p(3,"app-technical-skill-search"),l(),o(4,"p-table",7,0),d("onLazyLoad",function(ee){return $(s),F(a.techSkillStore.onLazyLoad(ee))}),y(6,Me,2,1,"ng-template",null,1,E)(8,Pe,3,1,"ng-template",null,2,E)(10,je,3,1,"ng-template",null,3,E),l()(),p(12,"p-blockui",8)}if(e&2){let s=W(5),S=W(9);n(4),c("columns",a.techSkillStore.$cols())("value",a.techSkillStore.$dataList())("loading",a.techSkillStore.$dataLoading())("paginator",!0)("rows",5)("rowsPerPageOptions",I(11,we))("paginatorDropdownAppendTo",S)("lazy",!0)("totalRecords",a.techSkillStore.$totalRowCount()),n(8),c("blocked",a.techSkillStore.$disabledTable())("target",s)}},dependencies:[_,v,fe,Se,P,ke,me,U]})};function Ae(i,t){if(i&1&&(o(0,"span",3),h(1),l()),i&2){let e=t.$implicit;n(),ne(" ",e.name," = ",e.description," ")}}var J=class i{techSkillStore=k(u);$header=C(()=>"Technical Skill Form");techSKillForm=new O({category:new T({value:null,disabled:!1}),indicator:new T({value:"",disabled:!1}),metricType:new T({value:null,disabled:!1})});selectedDataSubscription;constructor(){this.selectedDataSubscription=j(this.techSkillStore.$selectedData).subscribe(t=>{this.techSKillForm.patchValue({category:this.techSkillStore.$selectedData()?.skillCategory?.id,indicator:this.techSkillStore.$selectedData()?.techSkill,metricType:this.techSkillStore.$selectedData()?.metricType?.id})})}onSave(){let t={category:this.techSKillForm.get("category")?.value,metricTypeId:this.techSKillForm.get("metricType")?.value,indicator:this.techSKillForm.get("indicator")?.value};this.techSkillStore.onSaveFormAdd(t)}ngOnDestroy(){this.techSKillForm.reset(),this.selectedDataSubscription.unsubscribe()}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=g({type:i,selectors:[["app-technical-skill-form"]],standalone:!0,features:[b],decls:23,vars:5,consts:[[1,"mt-6","w-full","flex","flex-col","space-y-2"],[1,"flex","flex-col","space-y-1","mb-2",3,"formGroup"],[1,"grid","grid-cols-12","gap-2","items-center","pb-4"],[1,"col-span-12","md:col-span-2"],["formControlName","category","name","category","styleClass","col-span-12 md:col-span-7","appendTo","body",3,"options"],["pInputText","","formControlName","indicator","name","indicator",1,"col-span-8","md:col-span-7","bg-gray-50","border","border-gray-300","text-gray-900","rounded-lg","focus:ring-primary-600","focus:border-primary-600","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500"],["formControlName","metricType","name","metricType","styleClass","col-span-12 md:col-span-7","appendTo","body",3,"options"],[1,"pt-10","grid","grid-flow-row"],[1,"col-span-12","md:col-span-1"],["class","col-span-12 md:col-span-2",4,"ngFor","ngForOf"],[1,"mt-4"],[1,"flex","justify-end","space-x-1","mt-6"],["label","Save","icon","pi pi-check","severity","success",3,"click","disabled"],["label","Cancel","icon","pi pi-sign-out","severity","danger",3,"click"]],template:function(e,a){e&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"label",3),h(4,"Category:"),l(),p(5,"p-dropdown",4),l(),o(6,"div",2)(7,"label",3),h(8,"Indicators:"),l(),p(9,"input",5),l(),o(10,"div",2)(11,"label",3),h(12,"Type of Metrics:"),l(),p(13,"p-dropdown",6),l(),o(14,"div",7)(15,"label",8)(16,"b"),h(17,"*Notes:"),l()(),y(18,Ae,2,2,"span",9),l()(),o(19,"div",10)(20,"div",11)(21,"p-button",12),d("click",function(){return a.onSave()}),l(),o(22,"p-button",13),d("click",function(){return a.techSkillStore.onCancelFormAdd()}),l()()()()),e&2&&(n(),c("formGroup",a.techSKillForm),n(4),c("options",a.techSkillStore.$optionsCategory()),n(8),c("options",a.techSkillStore.$optionsMetricType()),n(5),c("ngForOf",a.techSkillStore.$descMetricType()),n(3),c("disabled",a.techSkillStore.$disabledSave()))},dependencies:[_,A,N,B,G,v,P,z,K,V]})};var Ne=()=>["add","edit"];function Be(i,t){i&1&&p(0,"app-technical-skill-list")}function Oe(i,t){i&1&&p(0,"app-technical-skill-form")}var _e=class i{techSkillStore=k(u);static \u0275fac=function(e){return new(e||i)};static \u0275cmp=g({type:i,selectors:[["app-technical-skill-reference"]],standalone:!0,features:[re([u]),b],decls:4,vars:3,consts:[[1,"w-full"],[1,"blue",3,"header"]],template:function(e,a){e&1&&(o(0,"div",0)(1,"p-panel",1),y(2,Be,1,0,"app-technical-skill-list")(3,Oe,1,0,"app-technical-skill-form"),l()()),e&2&&(n(),c("header",a.techSkillStore.$header()),n(),L(a.techSkillStore.$formMode()==="idle"?2:I(2,Ne).includes(a.techSkillStore.$formMode())?3:-1))},dependencies:[_,ue,q,J]})};export{_e as TechnicalSkillReferenceComponent};

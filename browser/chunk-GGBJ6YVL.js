import{a as W,b as z}from"./chunk-DGBJ6KCO.js";import{E as h,n as R,t as me,u as de,v as ue}from"./chunk-MBWGDGJJ.js";import{m as $,o as O}from"./chunk-BS6TUJAY.js";import"./chunk-4YRY4IP2.js";import"./chunk-SPCKIS3I.js";import"./chunk-LA3WXO4F.js";import{a as fe}from"./chunk-OQKDZ6KP.js";import{a as se,c as T,d as V,f as A,g as L,i as m,k as F,l as G,n as ce}from"./chunk-JHZUFCB2.js";import{a as ne}from"./chunk-PCSHOGMI.js";import{sa as ae,va as le,wa as pe}from"./chunk-LU7AHZRX.js";import{$b as X,Cc as re,Fb as oe,Gb as a,Hb as K,Ib as v,Nb as ie,Oa as l,Ob as C,Pb as Q,Xa as s,Z as k,bb as w,ca as S,da as d,eb as f,ha as b,jb as I,lb as te,mb as D,nb as N,ob as r,pb as n,qb as p,ra as y,sa as P,ub as J,vb as g,wb as _}from"./chunk-LGYBJQJA.js";var x=class{idProject;projectName;projectManager;totalMember;startDate;endDate;employeeList=[];teamLeader};function Ce(i,e){if(i&1&&(r(0,"div",7)(1,"div",9),a(2),n(),r(3,"div",10),a(4," - "),n(),r(5,"div",3),a(6),n()()),i&2){let t=e.$implicit;l(2),v(" ",t.fullName," "),l(4),v(" ",t.directorateDescription," ")}}var B=class i{projectStore=d(u);ref=d(W);onClickClose(){this.ref.close()}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=b({type:i,selectors:[["app-project-view-lookup"]],standalone:!0,features:[C],decls:41,vars:5,consts:[[1,"grid","grid-cols-12","gap-2",3,"formGroup"],[1,"col-span-2","flex","items-center"],[1,"break-words"],[1,"col-span-6"],[1,"p-2","border","rounded-md","bg-gray-300"],[1,"col-span-4"],[1,"col-span-2","flex","mt-2"],[1,"grid","grid-cols-12","gap-2"],["label","OK",3,"onClick"],[1,"col-span-5"],[1,"col-span-1","text-center"]],template:function(t,o){if(t&1&&(r(0,"div",0)(1,"div",1)(2,"p",2),a(3,"Project Name"),n()(),r(4,"div",3)(5,"p",4),a(6),n()(),p(7,"div",5),r(8,"div",1)(9,"p",2),a(10,"Project Manager"),p(11,"br"),a(12,"/ Penanggung Jawab"),n()(),r(13,"div",3)(14,"p",4),a(15),n()(),p(16,"div",5),r(17,"div",1)(18,"p",2),a(19,"Team Leader"),n()(),r(20,"div",3)(21,"p",4),a(22),n()(),p(23,"div",5),r(24,"div",1)(25,"p",2),a(26,"Total of Member"),n()(),r(27,"div",3)(28,"p",4),a(29),n()(),p(30,"div",5),r(31,"div",6)(32,"p",2),a(33,"Name of Member"),n()(),r(34,"div",3)(35,"p",4),D(36,Ce,7,2,"div",7,te),n()(),p(38,"div",5),r(39,"div")(40,"p-button",8),g("onClick",function(){return o.onClickClose()}),n()()()),t&2){let c,j,M,Z,ee;f("formGroup",o.projectStore.$viewForm()),l(6),v(" ",(c=o.projectStore.$viewForm().get("projectName"))==null?null:c.value," "),l(9),v(" ",(j=o.projectStore.$viewForm().get("projectManager"))==null?null:j.value," "),l(7),v(" ",(M=o.projectStore.$viewForm().get("teamLeader"))==null?null:M.value," "),l(7),v(" ",(Z=o.projectStore.$viewForm().get("totalMember"))==null?null:Z.value," "),l(7),N((ee=o.projectStore.$viewForm().get("employeeList"))==null?null:ee.value)}},dependencies:[h,L,$,F]})};var ve=se.APPRAISAL_API_URL+"/project",U=class i{constructor(e){this.http=e}findByCriteriaPaginated(e,t){let o={wrapper:e,pagingInfo:t};return this.http.post(ve+"/findByCriteriaPaginated",o)}findProjectAndEmployees(e){return this.http.post(ve+"/findProjectAndEmployees",e)}static \u0275fac=function(t){return new(t||i)(S(ne))};static \u0275prov=k({token:i,factory:i.\u0275fac,providedIn:"root"})};var u=class i{constructor(e,t,o){this.spinnerService=e;this.projectService=t;this.dialogService=o;this.setSpinner(),this.setSearchCategory(),this.setupFormListeners(),this.populateList()}fb=d(ce);state={$dataList:s([]),$dataLoading:s(!1),$selectedData:s(null),$loading:s(!1),$pagingInfo:s(new fe),$projectWrapper:s(null),$totalRowCount:s(0),$searchOptions:s([]),$disabledAdd:s(!0),$disabledEdit:s(!0),$disabledSave:s(!0),$disabledDelete:s(!0),$formMode:s("home")};$dataList=this.state.$dataList.asReadonly();$dataLoading=this.state.$dataLoading.asReadonly();$pagingInfo=this.state.$pagingInfo.asReadonly();$totalRowCount=this.state.$totalRowCount.asReadonly();$cols=s([{field:"projectName",header:"Project Name"},{field:"projectManager",header:"Project Manager"},{field:"totalMember",header:"Total Member",format:"center"}]).asReadonly();$projectWrapper=this.state.$projectWrapper.asReadonly();$selectData=this.state.$selectedData.asReadonly();$optionsCategory=this.state.$searchOptions.asReadonly();$searchForm=s(this.fb.group({category:new m({value:null,disabled:!1}),searchText:new m({value:"",disabled:!1})}));$projectForm=s(this.fb.group({idProject:new m(0),projectName:new m({value:"",disabled:!1},[V.required]),projectManager:new m({value:"",disabled:!0},[V.required]),totalMember:new m({value:0,disabled:!0},[V.required])})).asReadonly();$viewForm=s(this.fb.group({projectName:new m({value:"",disabled:!0}),projectManager:new m({value:"",disabled:!0}),teamLeader:new m({value:"",disabled:!0}),totalMember:new m({value:0,disabled:!0}),employeeList:new m({value:[],disabled:!0})}));$formMode=this.state.$formMode.asReadonly();ref;setSpinner(){pe(this.state.$loading).subscribe(e=>e?this.spinnerService.show():this.spinnerService.hide())}onLazyLoad(e){console.log(e);let t=this.state.$pagingInfo();t.currentPage=Math.floor(e.first/e.rows)+1,t.pageSize=e.rows,this.state.$pagingInfo.set(t),this.populateList()}populateList(e){this.state.$dataLoading.set(!0);let t=e||new x;this.state.$dataList.set([]),this.findByCriteriaPaginated(t)}findByCriteriaPaginated(e){this.projectService.findByCriteriaPaginated(e,this.state.$pagingInfo()).subscribe(t=>{t.status?(this.state.$pagingInfo.set(t.object.pagingInfo),this.state.$totalRowCount.set(t.object.totalRowCount),this.state.$dataList.set(t.object.dataList)):console.error("Failed to fetch project dataList."),this.state.$dataLoading.set(!1)},t=>{this.state.$dataLoading.set(!1),console.error("Error fetching project dataList:",t)})}setSearchCategory(){this.state.$searchOptions.set([{label:"Semua",value:null},{label:"Project Name",value:"projectName"},{label:"Project Manager",value:"projectManager"}])}onClickSearch(){let e=new x;this.$searchForm()?.value?.category==="projectName"?e.projectName=this.$searchForm().value.searchText:this.$searchForm()?.value?.category==="projectManager"&&(e.projectManager=this.$searchForm().value.searchText),this.populateList(e)}onClickResetSearch(){this.$searchForm().reset()}setupFormListeners(){let e=this.$projectForm();console.log("FLAG 1"),e.get("directorate")?.valueChanges.subscribe(t=>{let o=e.get("division");t?(o?.enable(),console.log("VALUE ",t)):this.resetForm(["division","department","position","unit","level"])}),e.get("division")?.valueChanges.subscribe(t=>{let o=e.get("department");t?o?.enable():this.resetForm(["department","position","unit","level"])}),e.get("department")?.valueChanges.subscribe(t=>{let o=e.get("position");t?o?.enable():this.resetForm(["position","unit","level"])}),e.get("position")?.valueChanges.subscribe(t=>{let o=e.get("unit");t?o?.enable():this.resetForm(["unit","level"])}),e.get("unit")?.valueChanges.subscribe(t=>{let o=e.get("level");t?o?.enable():this.resetForm(["level"])})}resetForm(e){let t=this.$projectForm();e.forEach(o=>{t.get(o)?.reset(),t.get(o)?.disable()})}resetAllForm(){let e=this.$projectForm();e.reset({idProject:null,projectName:"",projectManager:"",totalMember:null}),e.get("division")?.disable(),e.get("department")?.disable(),e.get("position")?.disable(),e.get("unit")?.disable(),e.get("level")?.disable()}onSetSelected(e){}setFormMode(e){this.state.$formMode.set(e),console.log(e)}onClickEdit(e){console.log("aaa"),this.setFormMode("edit")}onClickView(e){this.findProjectAndEmployees(e.id)}findProjectAndEmployees(e){this.projectService.findProjectAndEmployees(e).subscribe(t=>{if(t.status){let o=t.object;this.$viewForm().patchValue({projectName:o.projectName,projectManager:o.projectManager,teamLeader:o.teamLeadName,totalMember:o.totalMember,employeeList:o.employeeList}),this.ref=this.dialogService.open(B,{modal:!0}),this.ref.onClose.subscribe(c=>{})}else console.error("Failed to fetch project detail project.");this.state.$dataLoading.set(!1)},t=>{this.state.$dataLoading.set(!1),console.error("Error fetching project  detail project:",t)})}static \u0275fac=function(t){return new(t||i)(S(le),S(U),S(z))};static \u0275prov=k({token:i,factory:i.\u0275fac})};var ye=(i,e)=>e.field,Pe=()=>({"min-width":"50rem"}),we=()=>[5,10,20];function $e(i,e){i&1&&(r(0,"tr")(1,"td",13)(2,"div"),a(3,"Loading data..."),n()()())}function Le(i,e){if(i&1&&(r(0,"th",15),a(1),n()),i&2){let t=e.$implicit;l(),v(" ",t.header," ")}}function Fe(i,e){if(i&1&&(r(0,"tr"),w(1,Le,2,1,"th",14),r(2,"th"),a(3," Action "),n()()),i&2){let t=e.$implicit;l(),f("ngForOf",t)}}function xe(i,e){if(i&1&&(r(0,"td",19),a(1),n()),i&2){let t=_().$implicit,o=_().$implicit;l(),K(o[t.field])}}function Ee(i,e){if(i&1&&(r(0,"td"),a(1),n()),i&2){let t=_().$implicit,o=_().$implicit;l(),K(o[t.field])}}function Me(i,e){if(i&1&&w(0,xe,2,1,"td",19)(1,Ee,2,1,"td"),i&2){let t=e.$implicit;I(t.format==="center"?0:1)}}function ke(i,e){if(i&1){let t=J();r(0,"tr",16),D(1,Me,2,1,null,null,ye),r(3,"td")(4,"p-button",17),g("onClick",function(){let c=y(t).$implicit,j=_();return P(j.projectStore.onClickEdit(c))}),n(),r(5,"p-button",18),g("onClick",function(){let c=y(t).$implicit,j=_();return P(j.projectStore.onClickView(c))}),n()()()}if(i&2){let t=e.$implicit,o=e.columns;f("pSelectableRow",t),l(),N(o)}}var q=class i{projectStore=d(u);visibleViewLookup=!1;static \u0275fac=function(t){return new(t||i)};static \u0275cmp=b({type:i,selectors:[["app-project-list"]],standalone:!0,features:[C],decls:17,vars:14,consts:[["header",""],["body",""],["header","Project List"],[1,"grid","grid-cols-12","gap-4",3,"formGroup"],[1,"col-span-2"],["formControlName","category","placeholder","Search By",1,"w-full",3,"options"],[1,"col-span-7"],["type","text","pInputText","","formControlName","searchText",1,"w-full"],[1,"col-span-1"],["label","Search",3,"onClick"],["label","Reset",3,"onClick"],["stripedRows","","showGridlines","",3,"onLazyLoad","value","tableStyle","columns","loading","lazy","paginator","rows","rowsPerPageOptions","paginatorDropdownAppendTo","totalRecords"],["pTemplate","loadingbody"],["colspan","5",1,"text-center"],["class","!text-center",4,"ngFor","ngForOf"],[1,"!text-center"],[3,"pSelectableRow"],["label","Edit",3,"onClick"],["label","View",3,"onClick"],[2,"text-align","center"]],template:function(t,o){if(t&1){let c=J();r(0,"p-panel",2)(1,"div",3)(2,"div",4),p(3,"p-select",5),n(),r(4,"div",6),p(5,"input",7),n(),r(6,"div",8)(7,"p-button",9),g("onClick",function(){return y(c),P(o.projectStore.onClickSearch())}),n()(),r(8,"div",8)(9,"p-button",10),g("onClick",function(){return y(c),P(o.projectStore.onClickResetSearch())}),n()()(),p(10,"br"),r(11,"p-table",11),g("onLazyLoad",function(M){return y(c),P(o.projectStore.onLazyLoad(M))}),w(12,$e,4,0,"ng-template",12)(13,Fe,4,1,"ng-template",null,0,X)(15,ke,6,1,"ng-template",null,1,X),n()()}if(t&2){let c=oe(16);l(),f("formGroup",o.projectStore.$searchForm()),l(2),f("options",o.projectStore.$optionsCategory()),l(8),f("value",o.projectStore.$dataList())("tableStyle",Q(12,Pe))("columns",o.projectStore.$cols())("loading",o.projectStore.$dataLoading())("lazy",!0)("paginator",!0)("rows",5)("rowsPerPageOptions",Q(13,we))("paginatorDropdownAppendTo",c)("totalRecords",o.projectStore.$totalRowCount())}},dependencies:[h,R,ae,T,A,L,O,me,$,de,ue,re,F,G]})};var H=class i{projectStore=d(u);onResetClick(){this.projectStore.resetAllForm()}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=b({type:i,selectors:[["app-project-edit"]],standalone:!0,features:[C],decls:11,vars:1,consts:[[1,"grid","gap-4",3,"formGroup"],[1,"grid","grid-cols-12","gap-4"],[1,"col-span-2","flex","items-center"],[1,"col-span-3"],["type","text","pInputText","","formControlName","projectName",1,"w-full"],[1,"col-span-7"],[1,"grid","grid-cols-12","gap-4","mt-4"],[1,"col-span-12","flex","justify-end"],["severity","danger","label","Reset Form","icon","pi pi-refresh","variant","text",3,"onClick"]],template:function(t,o){t&1&&(r(0,"div",0)(1,"div",1)(2,"div",2)(3,"p"),a(4,"Project Name"),n()(),r(5,"div",3),p(6,"input",4),n(),p(7,"div",5),n(),r(8,"div",6)(9,"div",7)(10,"p-button",8),g("onClick",function(){return o.onResetClick()}),n()()()()),t&2&&f("formGroup",o.projectStore.$projectForm())},dependencies:[h,T,A,L,O,$,F,G]})};function Ie(i,e){i&1&&p(0,"app-project-list")}function De(i,e){i&1&&p(0,"app-project-edit")}var be=class i{projectStore=d(u);constructor(){}ngOnInit(){}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=b({type:i,selectors:[["app-employee"]],standalone:!0,features:[ie([u,z,W]),C],decls:4,vars:1,consts:[["header","Project Mapping"],[1,"mt-6"]],template:function(t,o){t&1&&(r(0,"p-panel",0)(1,"div",1),w(2,Ie,1,0,"app-project-list")(3,De,1,0,"app-project-edit"),n()()),t&2&&(l(2),I(o.projectStore.$formMode()==="home"?2:3))},dependencies:[h,R,q,H]})};export{be as ProjectComponent};

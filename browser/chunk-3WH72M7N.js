import{g as Y}from"./chunk-7U4M7FLE.js";import{a as ye,b as ue}from"./chunk-F2QBNAL5.js";import{D as R,E,g as te,j as oe,k as me,o as de,p as fe}from"./chunk-W7PXDANK.js";import{m as I,o as ce}from"./chunk-2FJU72MB.js";import"./chunk-4YRY4IP2.js";import"./chunk-6EZYCW4Y.js";import"./chunk-MUG45JXB.js";import{a as P}from"./chunk-OQKDZ6KP.js";import{b as ae,e as ne,f as re,h as A,k as le,l as se,n as pe}from"./chunk-WWIJJSWY.js";import"./chunk-MQPYQJ3G.js";import{ka as Z,oa as ee,va as ie}from"./chunk-RKZRWIXU.js";import{m as Q,n as X}from"./chunk-O2IJJLQI.js";import{Ab as g,Bb as p,Kb as q,La as z,Lb as d,Nb as L,Pa as s,Sb as K,Tb as _,Ub as J,Ya as o,_ as V,a as k,b as W,da as h,ea as y,eb as $,ec as b,gb as B,hb as c,ia as u,lb as S,mb as O,nb as U,pb as G,qb as H,rb as n,sa as x,sb as r,ta as v,tb as C,uc as w,xb as N}from"./chunk-ZIXU4GN5.js";var f=class t{constructor(i,e,a,l,m){this.spinnerService=i;this.employeeService=e;this.router=a;this.confirmDialog=l;this.messageService=m;this.setSearchCategory()}fb=y(pe);state={templateCertification:{$dataList:o([]),$dataListAttitude:o([]),$dataListTechnical:o([]),$dataLoading:o(!1),$pagingInfo:o(new P),$totalRowCount:o(1),$selectedData:o(null),$selectedVerified:o(!0),$disabledTable:o(!1),$optionsCategory:o([]),$optionDepartment:o([]),$selectedCategory:o(null),$searchText:o(""),$searchBtnClickEvent:o(!1)},templateEmployee:{$dataList:o([]),$dataListAttitude:o([]),$dataListTechnical:o([]),$dataLoading:o(!1),$pagingInfo:o(new P),$totalRowCount:o(1),$selectedData:o(null),$selectedVerified:o(!0),$disabledTable:o(!1),$optionsCategory:o([]),$optionDepartment:o([]),$selectedCategory:o(null),$searchText:o(""),$searchBtnClickEvent:o(!1),$employeeWrapper:o(null),$dataListEmployee:o([]),$selectDataEmployee:o(null),$optionPosition:o([]),$optionLevel:o([])},$formMode:o("idle"),$loading:o(!1)};$formMode=this.state.$formMode.asReadonly();addAction(){this.state.$formMode.set("add")}cancelAction(){this.state.$formMode.set("idle")}templateCertification={$dataList:this.state.templateCertification.$dataList.asReadonly(),$dataListAttitude:this.state.templateCertification.$dataListAttitude.asReadonly(),$dataListTechnical:this.state.templateCertification.$dataListTechnical.asReadonly(),$dataLoading:this.state.templateCertification.$dataLoading.asReadonly(),$selectedData:this.state.templateCertification.$selectedData.asReadonly(),$cols:o([{field:"no",header:"No",class_td:"!text-center !max-w-[50px]",type:"no"},{field:"noEmployee",header:"Employee ID",class_td:"!text-center"},{field:"fullName",header:"Employeee Full Name",class_td:"!text-center"},{field:"position",header:"Position",class_td:"!text-center"},{field:"level",header:"Level",class_td:"!text-center"},{field:"status",header:"Status",class_td:"!text-center"},{field:"action",header:"Actions",class_td:"flex justify-center items-center gap-2",type:"action"}]).asReadonly(),$colsEmployee:o([{field:"no",header:"No",class_td:"!text-center !max-w-[50px]",type:"no"},{field:"noEmployee",header:"Employee ID",class_td:"!text-center"},{field:"fullName",header:"Employeee Full Name",class_td:"!text-center"},{field:"action",header:"Actions",class_td:"flex justify-center items-center gap-2",type:"action"}]).asReadonly(),$techCols:o([{field:"no",header:"No",class_td:"!text-center !max-w-[50px]",type:"no"},{field:"category",header:"Category",class_td:"!text-center"},{field:"tools",header:"Tools",class_td:"!text-center"},{field:"typeAnswer",header:"Type of Answer",class_td:"!text-center"},{field:"action",header:"Actions",class_td:"flex justify-center items-center gap-2",type:"action"}]).asReadonly(),$pagingInfo:this.state.templateCertification.$pagingInfo.asReadonly(),$totalRowCount:this.state.templateCertification.$totalRowCount.asReadonly(),$optionsCategory:this.state.templateCertification.$optionsCategory.asReadonly(),$optionDepartment:this.state.templateCertification.$optionDepartment.asReadonly(),$selectedCategory:this.state.templateCertification.$selectedCategory.asReadonly(),$searchText:w(()=>this.templateCertification.$selectedCategory()==="id"?parseInt(this.state.templateCertification.$searchText()):this.state.templateCertification.$searchText()),$filter:w(()=>{let i=null;return this.templateCertification.$searchText()&&(i={noTemplate:this.templateCertification.$searchText()}),i}),$disabledTable:w(()=>this.state.$formMode()=="update")};templateEmployee={$dataList:this.state.templateEmployee.$dataList.asReadonly(),$dataListAttitude:this.state.templateEmployee.$dataListAttitude.asReadonly(),$dataListTechnical:this.state.templateEmployee.$dataListTechnical.asReadonly(),$dataLoading:this.state.templateEmployee.$dataLoading.asReadonly(),$selectedData:this.state.templateEmployee.$selectedData.asReadonly(),$cols:o([{field:"no",header:"No",class_td:"!text-center !max-w-[50px]",type:"no"},{field:"noEmployee",header:"Employee ID",class_td:"!text-center"},{field:"fullName",header:"Employeee Full Name",class_td:"!text-center"},{field:"action",header:"Actions",class_td:"flex justify-center items-center gap-2",type:"action"}]).asReadonly(),$pagingInfo:this.state.templateEmployee.$pagingInfo.asReadonly(),$totalRowCount:this.state.templateEmployee.$totalRowCount.asReadonly(),$optionsCategory:this.state.templateEmployee.$optionsCategory.asReadonly(),$optionDepartment:this.state.templateEmployee.$optionDepartment.asReadonly(),$selectedCategory:this.state.templateEmployee.$selectedCategory.asReadonly()};$searchForm=o(this.fb.group({category:new A({value:null,disabled:!1}),searchInput:new A({value:"",disabled:!0})})).asReadonly();setSearchCategory(){this.state.templateEmployee.$optionsCategory.set([{label:"Semua",value:1},{label:"Username",value:2}])}resetSearchForm(i){let e=this.$searchForm();e.get("searchInput")?.disable(),i.forEach(a=>{e.get(a)?.reset()}),this.getEmployeeList()}ref;getEmployeeList(){this.state.templateEmployee.$dataLoading.set(!0);let i={wrapper:this.state.templateEmployee.$employeeWrapper(),pagingInfo:this.state.templateEmployee.$pagingInfo(),totalRowCount:this.state.templateEmployee.$totalRowCount()};this.employeeService.getEmployeeList(i).subscribe(e=>{if(e.status){let a=e.object.dataList;this.state.templateEmployee.$dataList.set(a),this.state.templateEmployee.$pagingInfo.set(e.object.pagingInfo),this.state.templateEmployee.$totalRowCount.set(e.object.totalRowCount||0)}else console.error("Failed to fetch employee list.");this.state.templateEmployee.$dataLoading.set(!1)},e=>{console.error("Error fetching employee list:",e)})}onLazyLoadEmployee(i){this.state.templateEmployee.$pagingInfo.set(W(k({},this.templateEmployee.$pagingInfo()),{currentPage:Math.floor(i.first/i.rows)+1,pageSize:i.rows})),this.getEmployeeList()}onChangeSelectCatgory(i){let e=this.$searchForm();e.get("searchInput")?.setValue(""),i.value===2?e.get("searchInput")?.enable():e.get("searchInput")?.disable()}onSearchBy(){let i=this.$searchForm(),e=new ye;e.userName=i.get("searchInput")?.value;let a={wrapper:e,pagingInfo:this.state.templateEmployee.$pagingInfo(),totalRowCount:this.state.templateEmployee.$totalRowCount()};this.employeeService.getEmployeeList(a).subscribe(l=>{if(l.status){let m=l.object.dataList;this.state.templateEmployee.$dataList.set(m),this.state.templateEmployee.$pagingInfo.set(l.object.pagingInfo),this.state.templateEmployee.$totalRowCount.set(l.object.totalRowCount||0)}else this.messageService.add({severity:"warn",summary:"Perhatian",detail:"Failed to fetch employee list."})},l=>{this.messageService.add({severity:"warn",summary:"Perhatian",detail:"Error fetching employee list"})})}deleteAction(i){}editAction(i){}static \u0275fac=function(e){return new(e||t)(h(ie),h(ue),h(Y),h(Z),h(ee))};static \u0275prov=V({token:t,factory:t.\u0275fac})};var D=class t{static \u0275fac=function(e){return new(e||t)};static \u0275cmp=u({type:t,selectors:[["app-certification-upload"]],standalone:!0,features:[_],decls:2,vars:0,template:function(e,a){e&1&&(n(0,"p"),d(1,"certification-upload works!"),r())}})};var F=class t{certificationStore=y(f);static \u0275fac=function(e){return new(e||t)};static \u0275cmp=u({type:t,selectors:[["app-certification-employee-search"]],standalone:!0,features:[_],decls:10,vars:2,consts:[[1,"grid","gap-4",3,"formGroup"],[1,"grid","grid-cols-12","gap-4"],[1,"col-span-2","lg:col-span-2"],["placeholder","Search by","formControlName","category","name","searchBy",1,"w-full",3,"onChange","options"],[1,"col-span-8","md:col-span-10","lg:col-span-8"],["type","text","pInputText","","formControlName","searchInput",1,"w-full"],[1,"col-span-2","md:col-span-10","lg:col-span-2","text-center"],["icon","pi pi-search","label","Search","severity","info",3,"onClick"],["icon","pi pi-refresh","styleClass","w-[40px] h-[40px]","severity","danger",3,"onClick"]],template:function(e,a){e&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"p-select",3),g("onChange",function(m){return a.certificationStore.onChangeSelectCatgory(m)}),r()(),n(4,"div",4),C(5,"input",5),r(),n(6,"div",6)(7,"p-button",7),g("onClick",function(){return a.certificationStore.onSearchBy()}),r(),d(8," \xA0 "),n(9,"p-button",8),g("onClick",function(){return a.certificationStore.resetSearchForm(["category","searchInput"])}),r()()()()),e&2&&(c("formGroup",a.certificationStore.$searchForm()),s(3),c("options",a.certificationStore.templateEmployee.$optionsCategory()))},dependencies:[E,ae,ne,re,ce,me,I,le,se,R]})};var $e=()=>[5,10,20];function Ee(t,i){if(t&1&&(n(0,"th",7),d(1),r()),t&2){let e=i.$implicit;s(),L(" ",e.header," ")}}function Se(t,i){if(t&1&&(n(0,"tr"),$(1,Ee,2,1,"th",6),r()),t&2){let e=i.$implicit;s(),c("ngForOf",e)}}function xe(t,i){if(t&1&&(n(0,"td"),C(1,"div",10),r()),t&2){let e=p().$implicit,a=p().$implicit;S(e.class_td),s(),c("outerHTML",e.template(a[e.field]),z)}}function ve(t,i){if(t&1){let e=N();n(0,"td")(1,"p-button",11),g("click",function(){x(e);let l=p(2).$implicit,m=p();return v(m.certificationStore.editAction(l))}),r(),n(2,"p-button",12),g("click",function(){x(e);let l=p(2).$implicit,m=p();return v(m.certificationStore.deleteAction(l))}),r()()}if(t&2){let e=p().$implicit;S(e.class_td)}}function Le(t,i){if(t&1&&(n(0,"td"),d(1),r()),t&2){let e=p().$implicit,a=p().rowIndex;S(e.class_td),s(),L(" ",a+1," ")}}function be(t,i){if(t&1&&(n(0,"td"),d(1),r()),t&2){let e=p().$implicit,a=p().$implicit;S(e.class_td),s(),L(" ",a[e.field]," ")}}function we(t,i){if(t&1&&$(0,xe,2,3,"td",9)(1,ve,3,2,"td",9)(2,Le,2,3,"td",9)(3,be,2,3,"td",9),t&2){let e,a=i.$implicit;O((e=a.type)==="custom"?0:e==="action"?1:e==="no"?2:3)}}function Ie(t,i){if(t&1&&(n(0,"tr",8),G(1,we,4,1,null,null,U),r()),t&2){let e=i.$implicit,a=i.columns;c("pSelectableRow",e),s(),H(a)}}function Re(t,i){if(t&1&&(n(0,"tr")(1,"td",13),d(2,"Data Kosong"),r()()),t&2){let e=p();s(),B("colspan",e.certificationStore.templateEmployee.$cols().length)}}var M=class t{certificationStore=y(f);static \u0275fac=function(e){return new(e||t)};static \u0275cmp=u({type:t,selectors:[["app-certification-employee-list"]],standalone:!0,features:[_],decls:10,vars:10,consts:[["dt",""],["header",""],["body",""],["emptymessage",""],[1,"grid","gap-2"],[3,"onLazyLoad","columns","value","loading","paginator","rows","rowsPerPageOptions","paginatorDropdownAppendTo","lazy","totalRecords"],["class","!text-center",4,"ngFor","ngForOf"],[1,"!text-center"],[3,"pSelectableRow"],[3,"class"],[3,"outerHTML"],["styleClass","p-button-info","icon","pi pi-pencil","pTooltip","Edit",3,"click"],["styleClass","p-button-danger","icon","pi pi-trash","pTooltip","Delete",3,"click"],[1,"!text-center","w-full"]],template:function(e,a){if(e&1){let l=N();n(0,"div",4),C(1,"app-certification-employee-search"),n(2,"p-table",5,0),g("onLazyLoad",function(ge){return x(l),v(a.certificationStore.onLazyLoadEmployee(ge))}),$(4,Se,2,1,"ng-template",null,1,b)(6,Ie,3,1,"ng-template",null,2,b)(8,Re,3,1,"ng-template",null,3,b),r()()}if(e&2){let l=q(7);s(2),c("columns",a.certificationStore.templateEmployee.$cols())("value",a.certificationStore.templateEmployee.$dataList())("loading",a.certificationStore.templateEmployee.$dataLoading())("paginator",!0)("rows",5)("rowsPerPageOptions",J(9,$e))("paginatorDropdownAppendTo",l)("lazy",!0)("totalRecords",a.certificationStore.templateEmployee.$totalRowCount())}},dependencies:[E,I,de,fe,Q,te,R,F]})};function Te(t,i){t&1&&C(0,"app-certification-employee-list")}function De(t,i){t&1&&C(0,"app-certification-upload")}var Ce=class t{certificationStore=y(f);constructor(){}ngOnInit(){}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=u({type:t,selectors:[["app-certification"]],standalone:!0,features:[K([f]),_],decls:4,vars:2,consts:[["header","Certification List",1,"blue"],[1,"mt-6"],[4,"ngIf"]],template:function(e,a){e&1&&(n(0,"p-panel",0)(1,"div",1),$(2,Te,1,0,"app-certification-employee-list",2)(3,De,1,0,"app-certification-upload",2),r()()),e&2&&(s(2),c("ngIf",a.certificationStore.$formMode()==="idle"),s(),c("ngIf",a.certificationStore.$formMode()==="add"))},dependencies:[E,oe,X,M,D]})};export{Ce as CertificationComponent};

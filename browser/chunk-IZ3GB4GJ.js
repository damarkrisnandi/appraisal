import{a as oe,b as be}from"./chunk-DHGTNLRA.js";import{a as he}from"./chunk-RDKT7UU7.js";import{a as ee,b as te}from"./chunk-YDBF4JCQ.js";import{A as Y,O as P,j as A,k as M,l as ue,o as Q,p as X}from"./chunk-TS4LB2JZ.js";import{o as x,q as K,u as Z}from"./chunk-NDG5SCMG.js";import"./chunk-4YRY4IP2.js";import"./chunk-ATB2IEIN.js";import"./chunk-VP2SXEXU.js";import{a as ge}from"./chunk-OQKDZ6KP.js";import{a as le}from"./chunk-CH6NKNWW.js";import{b as G,e as U,f as H,h as T,k as q,l as J,n as fe}from"./chunk-FLY6AGIF.js";import{b as ce}from"./chunk-NXN4P4DR.js";import{a as _e}from"./chunk-QASMVVIP.js";import{ua as B,xa as de}from"./chunk-UHXCHP4M.js";import{$b as y,Ab as E,Bb as n,Cb as r,Db as c,Hb as $,Ib as f,Jb as m,Qc as W,Sb as k,Tb as s,Ub as j,Vb as N,Wc as z,Ya as a,Z as R,_b as me,ac as w,ca as v,da as u,fb as p,ha as C,kc as V,mc as O,nc as D,ob as b,ra as g,rb as d,sa as h,wb as L,zb as I}from"./chunk-QSF35MWG.js";var ie=class o{sendProjectAssessmentStore=u(_);ref=u(ee);visibleViewLookup=!1;pilih(){this.ref.close()}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=C({type:o,selectors:[["app-send-project-assessment-send-lookup"]],standalone:!0,features:[y],decls:7,vars:1,consts:[[1,"grid","grid-cols-12","gap-4"],[1,"col-span-1","content-center"],[1,"col-span-8"],["placeholder","Nama Pm/ Nama TL","appendTo","body",1,"w-full",3,"options"],[1,"col-span-2"],["label","Send",3,"onClick"]],template:function(e,i){e&1&&(n(0,"div",0)(1,"div",1),s(2,"Send To:"),r(),n(3,"div",2),c(4,"p-select",3),r(),n(5,"div",4)(6,"p-button",5),f("onClick",function(){return i.pilih()}),r()()()),e&2&&(a(4),d("options",i.sendProjectAssessmentStore.$optionPmTlList()))},dependencies:[P,M,x]})};var je=le.APPRAISAL_API_URL+"/project-assessment",ve=le.APPRAISAL_API_URL+"/project",ne=class o{constructor(t){this.http=t}findByCriteriaPaginated(t,e){let i={wrapper:t,pagingInfo:e};return this.http.post(je+"/findByCriteriaPaginated",i)}send(t){return this.http.post(je+"/save",t)}getPMAndTL(t){return this.http.get(ve+t+"/getPMAndTL")}static \u0275fac=function(e){return new(e||o)(v(ce))};static \u0275prov=R({token:o,factory:o.\u0275fac,providedIn:"root"})};var _=class o{constructor(t,e,i,l){this.spinnerService=t;this.dialogService=e;this.sendProjectAssessmentsService=i;this.projectService=l;this.setSpinner(),this.setSearchCategoryProject(),this.setSearchCategoryMember()}fb=u(fe);state={$dataListProject:p([]),$dataListMember:p([]),$dataLoading:p(!1),$selectedData:p(null),$loading:p(!1),$pagingInfo:p(new ge),$projectWrapper:p(null),$totalRowCount:p(0),$searchOptions:p([]),$searchOptionsEmployee:p([]),$optionPmTlList:p([]),$formMode:p("projectList")};$dataListProject=this.state.$dataListProject.asReadonly();$dataListMember=this.state.$dataListMember.asReadonly();$dataLoading=this.state.$dataLoading.asReadonly();$pagingInfo=this.state.$pagingInfo.asReadonly();$totalRowCount=this.state.$totalRowCount.asReadonly();$colsProject=p([{field:"projectName",header:"Project Name"},{field:"projectManager",header:"Project Manager"},{field:"teamLeader",header:"Team Leader"},{field:"startDate",header:"Start Date",format:"date"},{field:"endDate",header:"End Date",format:"date"},{field:"totalMember",header:"Total Member",format:"center"}]).asReadonly();$colsMember=p([{field:"employeeId",header:"Employee Id"},{field:"fullName",header:"Name"},{field:"department",header:"Department"},{field:"position",header:"Position"},{field:"level",header:"Level"},{field:"startDate",header:"Start Date",format:"date"},{field:"endDate",header:"End Date",format:"date"},{field:"noTemplate",header:"No Template"}]).asReadonly();$projectWrapper=this.state.$projectWrapper.asReadonly();$selectData=this.state.$selectedData.asReadonly();$optionsCategory=this.state.$searchOptions.asReadonly();$optionsCategoryEmployeeList=this.state.$searchOptionsEmployee.asReadonly();$searchForm=p(this.fb.group({category:new T({value:null,disabled:!1}),searchText:new T({value:"",disabled:!1}),startDate:new T({value:null,disabled:!1}),endDate:new T({value:null,disabled:!1})}));$optionPmTlList=this.state.$optionPmTlList.asReadonly();$formMode=this.state.$formMode.asReadonly();ref;setSpinner(){_e(this.state.$loading).subscribe(t=>t?this.spinnerService.show():this.spinnerService.hide())}onLazyLoadProject(t){let e=this.state.$pagingInfo();e.currentPage=Math.floor(t.first/t.rows)+1,e.pageSize=t.rows,this.state.$pagingInfo.set(e),this.populateListProject()}populateListProject(t){this.state.$dataLoading.set(!0);let e=t||new oe;this.state.$dataListProject.set([]),this.findByCriteriaPaginatedProject(e)}findByCriteriaPaginatedProject(t){this.projectService.findByCriteriaPaginated(t,this.state.$pagingInfo()).subscribe(e=>{e.status?(this.state.$pagingInfo.set(e.object.pagingInfo),this.state.$totalRowCount.set(e.object.totalRowCount),this.state.$dataListProject.set(e.object.dataList)):console.error("Failed to fetch project dataList."),this.state.$dataLoading.set(!1)},e=>{this.state.$dataLoading.set(!1),console.error("Error fetching project dataList:",e)})}onLazyLoadMember(t){let e=this.state.$pagingInfo();e.currentPage=Math.floor(t.first/t.rows)+1,e.pageSize=t.rows,this.state.$pagingInfo.set(e),this.populateListMember()}populateListMember(t){this.state.$dataLoading.set(!0);let e=t||new he;e.projectId=this.state.$selectedData()?.id,this.state.$dataListMember.set([]),this.findByCriteriaPaginatedMember(e)}findByCriteriaPaginatedMember(t){this.sendProjectAssessmentsService.findByCriteriaPaginated(t,this.state.$pagingInfo()).subscribe(e=>{e.status?(this.state.$pagingInfo.set(e.object.pagingInfo),this.state.$totalRowCount.set(e.object.totalRowCount),this.state.$dataListMember.set(e.object.dataList)):console.error("Failed to fetch project dataList."),this.state.$dataLoading.set(!1)},e=>{this.state.$dataLoading.set(!1),console.error("Error fetching project dataList:",e)})}setSearchCategoryProject(){this.state.$searchOptions.set([{label:"Semua",value:null},{label:"Project Name",value:"projectName"},{label:"Project Manager",value:"projectManager"},{label:"Team Leader",value:"teamLeader"}])}setSearchCategoryMember(){this.state.$searchOptionsEmployee.set([{label:"Semua",value:null},{label:"EmployeeId",value:"employeeId"},{label:"Name",value:"name"}])}onClickSearchProject(){let t=new oe;this.$searchForm()?.value?.category==="projectName"?t.projectName=this.$searchForm().value.searchText:this.$searchForm()?.value?.category==="projectManager"&&(t.projectManager=this.$searchForm().value.searchText),this.$searchForm()?.value?.startDate&&(t.startDate=this.$searchForm()?.value?.startDate),this.$searchForm()?.value?.endDate&&(t.endDate=this.$searchForm()?.value?.endDate),this.populateListProject(t)}onClickSearchMember(){let t=new oe;this.$searchForm()?.value?.category==="projectName"?t.projectName=this.$searchForm().value.searchText:this.$searchForm()?.value?.category==="projectManager"&&(t.projectManager=this.$searchForm().value.searchText),this.$searchForm()?.value?.startDate&&(t.startDate=this.$searchForm()?.value?.startDate),this.$searchForm()?.value?.endDate&&(t.endDate=this.$searchForm()?.value?.endDate),this.populateListProject(t)}onClickResetSearch(){this.$searchForm().reset()}onClickActionAssessment(t){this.state.$formMode.set("memberList"),this.state.$selectedData.set(t),this.populateListMember()}onClickActionSend(t){this.ref=this.dialogService.open(ie,{modal:!0}),this.ref.onClose.subscribe(e=>{})}static \u0275fac=function(e){return new(e||o)(v(de),v(te),v(ne),v(be))};static \u0275prov=R({token:o,factory:o.\u0275fac})};var Fe=(o,t)=>t.field,Re=()=>({"min-width":"50rem"}),Ie=()=>[5,10,20];function Ee(o,t){o&1&&(n(0,"tr")(1,"td",16)(2,"div"),s(3,"Loading data..."),r()()())}function ke(o,t){if(o&1&&(n(0,"th",18),s(1),r()),o&2){let e=t.$implicit;a(),N(" ",e.header," ")}}function Ne(o,t){if(o&1&&(n(0,"tr"),b(1,ke,2,1,"th",17),n(2,"th"),s(3," Action "),r()()),o&2){let e=t.$implicit;a(),d("ngForOf",e)}}function Ve(o,t){if(o&1&&(n(0,"td",22),s(1),r()),o&2){let e=m().$implicit,i=m().$implicit;a(),j(i[e.field])}}function Oe(o,t){if(o&1&&(n(0,"td"),s(1),V(2,"date"),r()),o&2){let e=m().$implicit,i=m().$implicit;a(),j(O(2,1,i[e.field],"dd/MM/yyyy"))}}function We(o,t){if(o&1&&(n(0,"td"),s(1),r()),o&2){let e=m().$implicit,i=m().$implicit;a(),j(i[e.field])}}function ze(o,t){if(o&1&&b(0,Ve,2,1,"td",22)(1,Oe,3,4,"td")(2,We,2,1,"td"),o&2){let e=t.$implicit;L(e.format==="center"?0:e.format==="date"?1:2)}}function Be(o,t){if(o&1){let e=$();n(0,"tr",19),I(1,ze,3,1,null,null,Fe),n(3,"td",20)(4,"p-button",21),f("onClick",function(){let l=g(e).$implicit,S=m();return h(S.sendProjectAssessmentStore.onClickActionSend(l))}),r()()()}if(o&2){let e=t.$implicit,i=t.columns;d("pSelectableRow",e),a(),E(i)}}var re=class o{sendProjectAssessmentStore=u(_);visibleViewLookup=!1;static \u0275fac=function(e){return new(e||o)};static \u0275cmp=C({type:o,selectors:[["app-send-project-assessment-member-list"]],standalone:!0,features:[y],decls:27,vars:14,consts:[["header",""],["body",""],["header","Send To Member"],[1,"grid","grid-cols-12","gap-2",3,"formGroup"],[1,"col-span-3"],["formControlName","category","placeholder","Search By",1,"w-full",3,"options"],[1,"col-span-9","md:col-span-9"],["pInputText","","formControlName","searchText","name","search"],["label","Search","icon","pi pi-search",3,"onClick"],["label","Reset","icon","pi pi-refresh","severity","info",3,"onClick"],[1,"col-span-1"],[1,"break-words"],["formControlName","startDate","appendTo","body"],["formControlName","endDate","appendTo","body"],["stripedRows","","showGridlines","",3,"onLazyLoad","value","tableStyle","columns","loading","lazy","paginator","rows","rowsPerPageOptions","paginatorDropdownAppendTo","totalRecords"],["pTemplate","loadingbody"],["colspan","11",1,"text-center"],["class","!text-center",4,"ngFor","ngForOf"],[1,"!text-center"],[3,"pSelectableRow"],[1,"justify-center"],["label","Send","severity","contrast",3,"onClick"],[2,"text-align","center"]],template:function(e,i){if(e&1){let l=$();n(0,"p-panel",2)(1,"div",3)(2,"div",4),c(3,"p-select",5),r(),n(4,"p-inputgroup",6),c(5,"input",7),n(6,"p-inputgroup-addon")(7,"p-button",8),f("onClick",function(){return g(l),h(i.sendProjectAssessmentStore.onClickSearchMember())}),r()(),n(8,"p-inputgroup-addon")(9,"p-button",9),f("onClick",function(){return g(l),h(i.sendProjectAssessmentStore.onClickResetSearch())}),r()()(),n(10,"div",10)(11,"p",11),s(12,"Start Date"),r()(),n(13,"div",4),c(14,"p-datepicker",12),r(),n(15,"div",10)(16,"p",11),s(17,"End Date"),r()(),n(18,"div",4),c(19,"p-datepicker",13),r()(),c(20,"br"),n(21,"p-table",14),f("onLazyLoad",function(se){return g(l),h(i.sendProjectAssessmentStore.onLazyLoadMember(se))}),b(22,Ee,4,0,"ng-template",15)(23,Ne,4,1,"ng-template",null,0,D)(25,Be,5,1,"ng-template",null,1,D),r()()}if(e&2){let l=k(26);a(),d("formGroup",i.sendProjectAssessmentStore.$searchForm()),a(2),d("options",i.sendProjectAssessmentStore.$optionsCategoryEmployeeList()),a(18),d("value",i.sendProjectAssessmentStore.$dataListMember())("tableStyle",w(12,Re))("columns",i.sendProjectAssessmentStore.$colsMember())("loading",i.sendProjectAssessmentStore.$dataLoading())("lazy",!0)("paginator",!0)("rows",5)("rowsPerPageOptions",w(13,Ie))("paginatorDropdownAppendTo",l)("totalRecords",i.sendProjectAssessmentStore.$totalRowCount())}},dependencies:[P,A,B,G,U,H,K,M,x,Q,X,W,Y,Z,ue,q,J,z]})};var Ge=(o,t)=>t.field,Ue=()=>({"min-width":"50rem"}),He=()=>[5,10,20];function qe(o,t){o&1&&(n(0,"tr")(1,"td",12)(2,"div"),s(3,"Loading data..."),r()()())}function Je(o,t){if(o&1&&(n(0,"th",14),s(1),r()),o&2){let e=t.$implicit;a(),N(" ",e.header," ")}}function Ke(o,t){if(o&1&&(n(0,"tr"),b(1,Je,2,1,"th",13),n(2,"th"),s(3," Action "),r()()),o&2){let e=t.$implicit;a(),d("ngForOf",e)}}function Qe(o,t){if(o&1&&(n(0,"td",18),s(1),r()),o&2){let e=m().$implicit,i=m().$implicit;a(),j(i[e.field])}}function Xe(o,t){if(o&1&&(n(0,"td"),s(1),V(2,"date"),r()),o&2){let e=m().$implicit,i=m().$implicit;a(),j(O(2,1,i[e.field],"dd/MM/yyyy"))}}function Ye(o,t){if(o&1&&(n(0,"td"),s(1),r()),o&2){let e=m().$implicit,i=m().$implicit;a(),j(i[e.field])}}function Ze(o,t){if(o&1&&b(0,Qe,2,1,"td",18)(1,Xe,3,4,"td")(2,Ye,2,1,"td"),o&2){let e=t.$implicit;L(e.format==="center"?0:e.format==="date"?1:2)}}function et(o,t){if(o&1){let e=$();n(0,"tr",15),I(1,Ze,3,1,null,null,Ge),n(3,"td",16)(4,"p-button",17),f("onClick",function(){let l=g(e).$implicit,S=m();return h(S.sendProjectAssessmentStore.onClickActionAssessment(l))}),r()()()}if(o&2){let e=t.$implicit,i=t.columns;d("pSelectableRow",e),a(),E(i)}}var ae=class o{sendProjectAssessmentStore=u(_);visibleViewLookup=!1;static \u0275fac=function(e){return new(e||o)};static \u0275cmp=C({type:o,selectors:[["app-send-project-assessment-project-list"]],standalone:!0,features:[y],decls:17,vars:14,consts:[["header",""],["body",""],["header","Send Project Assessment"],[1,"grid","grid-cols-12","grid-flow-rows","gap-2","w-full",3,"formGroup"],[1,"col-span-3"],["formControlName","category","placeholder","Search By",1,"w-full",3,"options"],[1,"col-span-9","md:col-span-9"],["pInputText","","formControlName","searchText","name","search"],["label","Search","icon","pi pi-search",3,"onClick"],["label","Reset","icon","pi pi-refresh","severity","info",3,"onClick"],["stripedRows","","showGridlines","",3,"onLazyLoad","value","tableStyle","columns","loading","lazy","paginator","rows","rowsPerPageOptions","paginatorDropdownAppendTo","totalRecords"],["pTemplate","loadingbody"],["colspan","7",1,"text-center"],["class","!text-center",4,"ngFor","ngForOf"],[1,"!text-center"],[3,"pSelectableRow"],[1,"justify-center"],["label","Assessment","severity","contrast",3,"onClick"],[2,"text-align","center"]],template:function(e,i){if(e&1){let l=$();n(0,"p-panel",2)(1,"div",3)(2,"div",4),c(3,"p-select",5),r(),n(4,"p-inputgroup",6),c(5,"input",7),n(6,"p-inputgroup-addon")(7,"p-button",8),f("onClick",function(){return g(l),h(i.sendProjectAssessmentStore.onClickSearchProject())}),r()(),n(8,"p-inputgroup-addon")(9,"p-button",9),f("onClick",function(){return g(l),h(i.sendProjectAssessmentStore.onClickResetSearch())}),r()()()(),c(10,"br"),n(11,"p-table",10),f("onLazyLoad",function(se){return g(l),h(i.sendProjectAssessmentStore.onLazyLoadProject(se))}),b(12,qe,4,0,"ng-template",11)(13,Ke,4,1,"ng-template",null,0,D)(15,et,5,1,"ng-template",null,1,D),r()()}if(e&2){let l=k(16);a(),d("formGroup",i.sendProjectAssessmentStore.$searchForm()),a(2),d("options",i.sendProjectAssessmentStore.$optionsCategory()),a(8),d("value",i.sendProjectAssessmentStore.$dataListProject())("tableStyle",w(12,Ue))("columns",i.sendProjectAssessmentStore.$colsProject())("loading",i.sendProjectAssessmentStore.$dataLoading())("lazy",!0)("paginator",!0)("rows",5)("rowsPerPageOptions",w(13,He))("paginatorDropdownAppendTo",l)("totalRecords",i.sendProjectAssessmentStore.$totalRowCount())}},dependencies:[P,A,B,G,U,H,K,M,x,Q,X,W,Y,Z,q,J,z]})};function tt(o,t){o&1&&c(0,"app-send-project-assessment-project-list")}function ot(o,t){o&1&&c(0,"app-send-project-assessment-member-list")}var Pe=class o{sendProjectAssessmentStore=u(_);constructor(){}ngOnInit(){}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=C({type:o,selectors:[["app-employee"]],standalone:!0,features:[me([_,te,ee]),y],decls:4,vars:1,consts:[["header","Send Project Assessment"],[1,"mt-6"]],template:function(e,i){e&1&&(n(0,"p-panel",0)(1,"div",1),b(2,tt,1,0,"app-send-project-assessment-project-list")(3,ot,1,0,"app-send-project-assessment-member-list"),r()()),e&2&&(a(2),L(i.sendProjectAssessmentStore.$formMode()==="projectList"?2:3))},dependencies:[P,A,ae,re]})};export{Pe as SendProjectAssessmentsComponent};

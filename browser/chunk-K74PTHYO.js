import{a as ye}from"./chunk-36Q7J5AF.js";import{A as _e,C as Q,H as C,g as K,j as fe,o as q,p as J,u as ke}from"./chunk-TWGBUOMK.js";import{m as R,o as W,s as ge}from"./chunk-XUJTQNY3.js";import"./chunk-4YRY4IP2.js";import"./chunk-QNAHFPN7.js";import"./chunk-5TPOAWEP.js";import{a as Y}from"./chunk-OQKDZ6KP.js";import{b as O,e as B,f as G,g as z,h as I,i as Se,k as H,l as U}from"./chunk-SBW42UDC.js";import"./chunk-BQYB7PSU.js";import{ka as ne,oa as he,va as ue,wa as X}from"./chunk-OWQSGUGC.js";import{m as j}from"./chunk-LDJVXUVP.js";import{$b as de,Ab as A,Bb as n,Cb as o,Db as m,Fc as w,Hb as v,Kb as h,Lb as c,Ub as E,Va as se,Vb as u,Xb as x,Za as s,Zb as ce,_ as re,_b as pe,ac as me,bc as T,cc as D,da as L,ea as y,gb as r,ia as b,ob as _,pc as $,qb as N,rb as d,sa as f,ta as S,vb as g,wb as M,xb as P,zb as V}from"./chunk-PVR6VDV5.js";var Z=class{id;name;technicalSkillCategoryId;categoryName;technicalSkillName;technicalSkillId;description;technicalSkills=[]},ee=class{id;name;metricTypeId;metricTypeName};var k=class i{constructor(t,e,l,a,p){this.spinnerService=t;this.messageService=e;this.confirmationService=l;this.confirmDialog=a;this.techSkillService=p;this.init()}state={$dataList:r([]),$dataListOri:r([]),$dataLoading:r(!1),$pagingInfo:r(new Y),$totalRowCount:r(1),$selectedData:r(null),$selectedVerified:r(!0),$loading:r(!1),$disabledTable:r(!1),$optionsFilter:r([]),$selectedFilter:r(""),$searchText:r(""),$searchBtnClickEvent:r(!1),$optionsMetricType:r([]),$descMetricType:r([]),$disabledUpdate:r(!0),$disabledSave:r(!0),$disabledCancel:r(!0),$formMode:r("idle"),$header:r("Daftar List Technical Skill"),$techSkillList:r([]),$techSkillLoading:r(!1),$techSkillpagingInfo:r(new Y),$techSkilltotalRowCount:r(1),$selectedtechSkill:r(null)};$dataList=this.state.$dataList.asReadonly();$dataListOri=this.state.$dataListOri.asReadonly();$dataLoading=this.state.$dataLoading.asReadonly();$selectedData=this.state.$selectedData.asReadonly();$cols=r([{header:"No",class_td:"!text-center",type:"number"},{field:"name",header:"Kategori Keahlian",class_td:"!text-center"},{field:"technicalSkillName",header:"Keahlian Teknis",class_td:"!text-center"},{field:"metricTypeName",header:"Type of Metrics",class_td:"!text-center"},{field:"action",header:"Actions",class_td:"flex justify-center items-center gap-2",type:"action"}]).asReadonly();$pagingInfo=this.state.$pagingInfo.asReadonly();$totalRowCount=this.state.$totalRowCount.asReadonly();$optionsFilter=this.state.$optionsFilter.asReadonly();$selectedFilter=this.state.$selectedFilter.asReadonly();$searchText=this.state.$searchText.asReadonly();$filter=w(()=>{let t=null;if(this.$selectedFilter()){t={};let e=this.$selectedFilter()??"",l;l=this.$searchText()??"",t[e]=l}return t});$optionsMetricType=this.state.$optionsMetricType.asReadonly();$descMetricType=this.state.$descMetricType.asReadonly();$disabledSave=w(()=>this.state.$disabledSave()&&this.state.$formMode()=="idle");$disabledCancel=w(()=>this.state.$disabledCancel()&&this.state.$formMode()=="idle");$disabledTable=w(()=>this.state.$formMode()=="edit");$formMode=this.state.$formMode.asReadonly();$header=this.state.$header.asReadonly();$techSkillList=this.state.$techSkillList.asReadonly();$techSkillLoading=this.state.$techSkillLoading.asReadonly();$selectedtechSkill=this.state.$selectedtechSkill.asReadonly();$techSkillpagingInfo=this.state.$techSkillpagingInfo.asReadonly();$techSkilltotalRowCount=this.state.$techSkilltotalRowCount.asReadonly();$colsTechSkill=r([{field:"name",header:"Technical Skill",class_td:"!text-center"},{field:"metricTypeId",header:"Type of Metrics",class_td:"!text-center",type:"dropdown"},{field:"delete",header:"Hapus",class_td:"!text-center",type:"delete"}]).asReadonly();init(){this.setSpinner(),this.populateList(),this.setSearchFilter(),this.generateMetric()}setSpinner(){X(this.state.$loading).subscribe(t=>t?this.spinnerService.show():this.spinnerService.hide())}populateList(){this.state.$dataLoading.set(!0);let t={wrapper:this.$filter(),pagingInfo:this.state.$pagingInfo(),totalRowCount:this.state.$totalRowCount()},e=[];this.techSkillService.findTechnialSkillCategoryPagination(t).subscribe(l=>{if(l.status){this.state.$pagingInfo.set(l.object.pagingInfo||new Y);for(let a of l.object.dataList)if(a.technicalSkills.length)for(let p of a.technicalSkills){let F={id:a.id,name:a.name,technicalSkillId:p.id,technicalSkillName:p.name,metricTypeId:p.id,metricTypeName:p.metricTypeName};e.push(F)}this.state.$dataListOri.set(l.object.dataList||[]),this.state.$dataList.set(e||[]),this.state.$totalRowCount.set(l.object.totalRowCount||0)}this.state.$dataLoading.set(!1)})}onLazyLoad(t){this.populateList()}setSearchFilter(){this.state.$optionsFilter.set([{label:"Kategori",value:"name"},{label:"Keahlian Teknis",value:"technicalSkillName"},{label:"Type of Metric",value:"metricTypeName"}])}generateMetric(){let t=[],e=[];this.techSkillService.metricTypes().subscribe(l=>{l.status&&l.object.map(a=>{t.push({value:a.id,label:a.name}),e.push(a)})}),this.state.$optionsMetricType.set(t),this.state.$descMetricType.set(e)}resetState(){this.state.$dataList.set([]),this.state.$dataListOri.set([]),this.state.$dataLoading.set(!1),this.state.$selectedData.set(null),this.state.$techSkillList.set([]),this.state.$loading.set(!1),this.state.$searchText.set(""),this.state.$searchBtnClickEvent.set(!1)}onSearchBtnClicked({filter:t,search:e}){this.state.$selectedFilter.set(t),t&&this.state.$searchText.set(e),this.populateList()}onRefreshSearchClicked(){this.state.$searchText.set(""),this.state.$searchBtnClickEvent.set(!1),this.populateList()}onAddTechSkill(){this.resetState(),this.state.$formMode.set("add"),this.state.$header.set("Add Technical Skill")}editAction(t){let e=this.$dataListOri().findIndex(l=>l.id==t.id);this.state.$selectedData.set(t),this.state.$techSkillList.set(this.$dataListOri()[e].technicalSkills),this.state.$formMode.set("edit"),this.state.$header.set("Edit Technical Skill")}onSaveFormAdd(t){this.state.$formMode()==="add"?this.techSkillService.addTechnicalCategory(t).subscribe(e=>{e.status?(this.confirmDialog.confirm({message:`Berhasil ${this.state.$formMode()=="add"?"menambahkan":"update"} data technical skill!`,header:"Success",key:"ok",icon:"pi pi-check-circle",accept:()=>{this.state.$formMode.set("idle"),this.state.$header.set("Daftar List Technical Skill ")}}),this.populateList()):this.messageService.add({severity:"error",summary:"Error",detail:`Failed to ${this.state.$formMode()=="add"?"save":"update"} data.`})},e=>{this.messageService.add({severity:"warn",summary:"Perhatian",detail:`Error ${this.state.$formMode()=="add"?"save":"update"} data.`})}):this.techSkillService.edit(t).subscribe(e=>{e.status?(this.confirmDialog.confirm({message:`Berhasil ${this.state.$formMode()=="add"?"menambahkan":"update"} data technical skill!`,header:"Success",key:"ok",icon:"pi pi-check-circle",accept:()=>{this.state.$formMode.set("idle"),this.state.$header.set("Daftar List Technical Skill ")}}),this.populateList()):this.messageService.add({severity:"error",summary:"Error",detail:`Failed to ${this.state.$formMode()=="add"?"save":"update"} data.`})},e=>{this.messageService.add({severity:"warn",summary:"Perhatian",detail:`Error ${this.state.$formMode()=="add"?"save":"update"} data.`})})}onCancelFormAdd(){this.resetState(),this.state.$formMode.set("idle"),this.state.$header.set("Daftar List Technical Skill ")}deleteAction(t){this.state.$selectedData.set(t),this.confirmationService.confirm({header:"Konfirmasi",message:`Apakah Anda yakin ingin menghapus data ${this.$selectedData()?.name} ini?`,accept:()=>{this.techSkillService.delete(t.id).subscribe(e=>{if(e.status){let l=`Hapus Technical Skill ${this.$selectedData()?.name} berhasil!`;this.messageService.add({severity:"success",summary:"Success",detail:l}),this.state.$formMode.set("idle"),this.state.$header.set("Daftar List Technical Skill "),this.state.$selectedData.set(null),this.populateList()}else this.messageService.add({severity:"error",summary:"Error",detail:e.message});this.populateList()})},reject:()=>{}})}deleteTechSkill(t){}updateDataTechSkill(t){let e=new ee;e.name=t,this.state.$techSkillList().push(e)}static \u0275fac=function(e){return new(e||i)(L(ue),L(he),L(ne),L(ne),L(ye))};static \u0275prov=re({token:i,factory:i.\u0275fac})};var ie=class i{techSkillStore=y(k);filter=this.techSkillStore.$optionsFilter();selectedFilter=this.techSkillStore.$selectedFilter();search=this.techSkillStore.$searchText();searchForm=new z({filter:new I({value:null,disabled:!1}),search:new I({value:"",disabled:!1})});tempSearch={filter:null,search:""};constructor(){this.onFilterChanges(),this.onSearchChanges()}onFilterChanges(){this.searchForm.controls.filter.valueChanges.subscribe(t=>{this.tempSearch.filter=t,this.searchForm.get("search")?.reset(),t?this.searchForm.get("search")?.enable():this.searchForm.get("search")?.disable()})}onSearchChanges(){this.searchForm.controls.search.valueChanges.subscribe(t=>{this.tempSearch.search=t})}onButtonClicked(){this.techSkillStore.onSearchBtnClicked(this.tempSearch)}onRefreshSearch(){this.searchForm.patchValue({filter:null}),this.techSkillStore.onSearchBtnClicked(this.tempSearch)}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=b({type:i,selectors:[["app-technical-skill-search"]],standalone:!0,features:[T],decls:8,vars:2,consts:[[1,"grid","grid-cols-6","grid-flow-rows","gap-2",3,"formGroup"],["styleClass","col-span-6 md:col-span-1","formControlName","filter","name","filter","appendTo","body","placeholder","Select Filter",3,"options"],[1,"col-span-6","md:col-span-5"],["pInputText","","formControlName","search","name","search"],["icon","pi pi-search",1,"w-full","!h-full",3,"click"],["icon","pi pi-refresh","severity","info",1,"w-full","!h-full",3,"click"]],template:function(e,l){e&1&&(n(0,"div",0),m(1,"p-dropdown",1),n(2,"p-inputgroup",2),m(3,"input",3),n(4,"p-inputgroup-addon")(5,"p-button",4),h("click",function(){return l.onButtonClicked()}),o()(),n(6,"p-inputgroup-addon")(7,"p-button",5),h("click",function(){return l.onRefreshSearch()}),o()()()()),e&2&&(d("formGroup",l.searchForm),s(),d("options",l.techSkillStore.$optionsFilter()))},dependencies:[C,O,B,G,W,R,_e,ge,Q,H,U]})};var Le=()=>[5,10,20];function Me(i,t){if(i&1&&(n(0,"th",10),u(1),o()),i&2){let e=t.$implicit;s(),x(" ",e.header," ")}}function De(i,t){if(i&1&&(n(0,"tr"),_(1,Me,2,1,"th",9),o()),i&2){let e=t.$implicit;s(),d("ngForOf",e)}}function Re(i,t){if(i&1&&(n(0,"td"),u(1),o()),i&2){let e=c().$implicit,l=c().rowIndex;g(e.class_td),s(),x(" ",l+1," ")}}function Ie(i,t){if(i&1&&(n(0,"td"),m(1,"div",13),o()),i&2){let e=c().$implicit,l=c().$implicit;g(e.class_td),s(),d("outerHTML",e.template(l[e.field]),se)}}function Ee(i,t){if(i&1){let e=v();n(0,"td")(1,"p-button",14),h("click",function(){f(e);let a=c(2).$implicit,p=c();return S(p.techSkillStore.editAction(a))}),o(),n(2,"p-button",15),h("click",function(){f(e);let a=c(2).$implicit,p=c();return S(p.techSkillStore.deleteAction(a))}),o()()}if(i&2){let e=c().$implicit;g(e.class_td)}}function Ne(i,t){if(i&1&&(n(0,"td"),u(1),o()),i&2){let e=c().$implicit,l=c().$implicit;g(e.class_td),s(),x(" ",l[e.field]," ")}}function Pe(i,t){if(i&1&&_(0,Re,2,3,"td",12)(1,Ie,2,3,"td",12)(2,Ee,3,2,"td",12)(3,Ne,2,3,"td",12),i&2){let e,l=t.$implicit;M((e=l.type)==="number"?0:e==="custom"?1:e==="action"?2:3)}}function Ve(i,t){if(i&1&&(n(0,"tr",11),V(1,Pe,4,1,null,null,P),o()),i&2){let e=t.$implicit,l=t.columns;d("pSelectableRow",e),s(),A(l)}}function Ae(i,t){if(i&1&&(n(0,"tr")(1,"td",16),u(2,"Data Kosong"),o()()),i&2){let e=c();s(),N("colspan",e.techSkillStore.$cols().length)}}var le=class i{techSkillStore=y(k);static \u0275fac=function(e){return new(e||i)};static \u0275cmp=b({type:i,selectors:[["app-technical-skill-list"]],standalone:!0,features:[T],decls:13,vars:12,consts:[["dt",""],["header",""],["body",""],["emptymessage",""],[1,"card"],[1,"flex","justify-end","items-center","gap-1","flex-col","md:flex-row","mb-2","w-full"],["styleClass","p-button-contrast w-full","icon","pi pi-plus","label","Tambah Keahlian Teknis",3,"click"],["showGridlines","",3,"onLazyLoad","columns","value","loading","paginator","rows","rowsPerPageOptions","paginatorDropdownAppendTo","lazy","totalRecords"],[3,"blocked","target"],["class","!text-center",4,"ngFor","ngForOf"],[1,"!text-center"],[3,"pSelectableRow"],[3,"class"],[3,"outerHTML"],["styleClass","p-button-info","icon","pi pi-pencil","pTooltip","Ubah Data","tooltipPosition","bottom",3,"click"],["styleClass","p-button-danger","icon","pi pi-trash","pTooltip","Hapus Data","tooltipPosition","bottom",3,"click"],[1,"!text-center","w-full"]],template:function(e,l){if(e&1){let a=v();n(0,"div",4)(1,"div",5)(2,"p-button",6),h("click",function(){return f(a),S(l.techSkillStore.onAddTechSkill())}),o(),m(3,"app-technical-skill-search"),o(),n(4,"p-table",7,0),h("onLazyLoad",function(F){return f(a),S(l.techSkillStore.onLazyLoad(F))}),_(6,De,2,1,"ng-template",null,1,$)(8,Ve,3,1,"ng-template",null,2,$)(10,Ae,3,1,"ng-template",null,3,$),o()(),m(12,"p-blockui",8)}if(e&2){let a=E(5),p=E(9);s(4),d("columns",l.techSkillStore.$cols())("value",l.techSkillStore.$dataList())("loading",l.techSkillStore.$dataLoading())("paginator",!0)("rows",5)("rowsPerPageOptions",D(11,Le))("paginatorDropdownAppendTo",p)("lazy",!0)("totalRecords",l.techSkillStore.$totalRowCount()),s(8),d("blocked",l.techSkillStore.$disabledTable())("target",a)}},dependencies:[C,R,q,J,j,ke,K,ie]})};var je=()=>[5,10,20];function Ke(i,t){if(i&1&&(n(0,"th",20),u(1),o()),i&2){let e=t.$implicit;s(),x(" ",e.header," ")}}function Oe(i,t){if(i&1&&(n(0,"tr"),_(1,Ke,2,1,"th",19),o()),i&2){let e=t.$implicit;s(),d("ngForOf",e)}}function Be(i,t){if(i&1){let e=v();n(0,"td")(1,"p-button",23),h("click",function(){f(e);let a=c(2).$implicit,p=c();return S(p.techSkillStore.deleteTechSkill(a))}),o()()}if(i&2){let e=c().$implicit;g(e.class_td)}}function Ge(i,t){if(i&1){let e=v();n(0,"td")(1,"p-dropdown",24),de("ngModelChange",function(a){f(e);let p=c().$implicit,F=c().$implicit;return pe(F[p.field],a)||(F[p.field]=a),S(a)}),o()()}if(i&2){let e=c().$implicit,l=c().$implicit,a=c();g(e.class_td),s(),d("options",a.techSkillStore.$optionsMetricType()),ce("ngModel",l[e.field])}}function ze(i,t){if(i&1&&(n(0,"td"),u(1),o()),i&2){let e=c().$implicit,l=c().$implicit;g(e.class_td),s(),x(" ",l[e.field]," ")}}function He(i,t){if(i&1&&_(0,Be,2,2,"td",22)(1,Ge,2,4,"td",22)(2,ze,2,3,"td",22),i&2){let e,l=t.$implicit;M((e=l.type)==="delete"?0:e==="dropdown"?1:2)}}function Ue(i,t){if(i&1&&(n(0,"tr",21),V(1,He,3,1,null,null,P),o()),i&2){let e=t.$implicit,l=t.columns;d("pSelectableRow",e),s(),A(l)}}function We(i,t){if(i&1&&(n(0,"tr")(1,"td",25),u(2,"Data Kosong"),o()()),i&2){let e=c();s(),N("colspan",e.techSkillStore.$cols().length)}}var ae=class i{techSkillStore=y(k);$header=w(()=>"Technical Skill Form");techSKillForm=new z({category:new I({value:"",disabled:!1}),techSkill:new I({value:"",disabled:!1})});selectedDataSubscription;constructor(){this.selectedDataSubscription=X(this.techSkillStore.$selectedData).subscribe(t=>{this.techSKillForm.patchValue({category:this.techSkillStore.$selectedData()?.name}),this.techSkillStore.$selectedData()?.name&&this.techSKillForm.controls.category.disable()})}onSave(){let t=new Z;t.id=this.techSkillStore.$selectedData()?.id,t.name=this.techSKillForm.get("category")?.value,t.technicalSkills=this.techSkillStore.$techSkillList(),this.techSkillStore.onSaveFormAdd(t)}addData(){this.techSkillStore.updateDataTechSkill(this.techSKillForm.get("techSkill")?.value),this.techSKillForm.get("category")?.value&&this.techSKillForm.controls.category.disable(),this.techSKillForm.controls.techSkill.setValue("")}ngOnDestroy(){this.techSKillForm.reset(),this.selectedDataSubscription.unsubscribe()}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=b({type:i,selectors:[["app-technical-skill-form"]],standalone:!0,features:[T],decls:27,vars:10,consts:[["dt",""],["header",""],["body",""],["emptymessage",""],[1,"mt-6","w-full","flex","flex-col","space-y-2"],[1,"flex","flex-col","space-y-1","mb-2"],[3,"formGroup"],[1,"grid","grid-cols-12","gap-2","items-center","pb-4"],[1,"col-span-12","md:col-span-2"],["pInputText","","formControlName","category","name","category",1,"col-span-8","md:col-span-7","bg-gray-50","border","border-gray-300","text-gray-900","rounded-lg","focus:ring-primary-600","focus:border-primary-600","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500"],["pInputText","","formControlName","techSkill","name","techSkill",1,"col-span-8","md:col-span-7","bg-gray-50","border","border-gray-300","text-gray-900","rounded-lg","focus:ring-primary-600","focus:border-primary-600","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500"],["styleClass","p-button-contrast","icon","pi pi-plus","pTooltip","Tambah Technical Skill",3,"click"],[1,"pt-4"],[2,"font-weight","600"],["showGridlines","",3,"columns","value","paginator","rows","rowsPerPageOptions","paginatorDropdownAppendTo","totalRecords"],[1,"mt-4"],[1,"flex","justify-end","space-x-1","mt-6"],["label","Save","icon","pi pi-check","severity","success",3,"click","disabled"],["label","Cancel","icon","pi pi-sign-out","severity","danger",3,"click"],["class","!text-center",4,"ngFor","ngForOf"],[1,"!text-center"],[3,"pSelectableRow"],[3,"class"],["styleClass","p-button-danger","icon","pi pi-trash","pTooltip","Hapus Technical Skill",3,"click"],["styleClass","col-span-12 md:col-span-7","appendTo","body","placeholder","Select Type of Metric",3,"ngModelChange","options","ngModel"],[1,"!text-center","w-full"]],template:function(e,l){if(e&1){let a=v();n(0,"div",4)(1,"div",5)(2,"div",6)(3,"div",7)(4,"label",8),u(5,"Nama Kategori:"),o(),m(6,"input",9),o(),n(7,"div",7)(8,"label",8),u(9,"Nama Skill:"),o(),m(10,"input",10),n(11,"p-button",11),h("click",function(){return f(a),S(l.addData())}),o()()(),n(12,"div",12)(13,"span",13),u(14,"List Technical Skill yang dipilih:"),o(),n(15,"p-table",14,0),_(17,Oe,2,1,"ng-template",null,1,$)(19,Ue,3,1,"ng-template",null,2,$)(21,We,3,1,"ng-template",null,3,$),o()()(),n(23,"div",15)(24,"div",16)(25,"p-button",17),h("click",function(){return f(a),S(l.onSave())}),o(),n(26,"p-button",18),h("click",function(){return f(a),S(l.techSkillStore.onCancelFormAdd())}),o()()()()}if(e&2){let a=E(20);s(2),d("formGroup",l.techSKillForm),s(13),d("columns",l.techSkillStore.$colsTechSkill())("value",l.techSkillStore.$techSkillList())("paginator",!0)("rows",5)("rowsPerPageOptions",D(9,je))("paginatorDropdownAppendTo",a)("totalRecords",l.techSkillStore.$techSkillList().length),s(10),d("disabled",l.techSkillStore.$disabledSave())}},dependencies:[C,O,B,G,Se,W,R,q,J,j,K,Q,H,U]})};var qe=()=>["add","edit"];function Je(i,t){i&1&&m(0,"app-technical-skill-list")}function Qe(i,t){i&1&&m(0,"app-technical-skill-form")}var Te=class i{techSkillStore=y(k);static \u0275fac=function(e){return new(e||i)};static \u0275cmp=b({type:i,selectors:[["app-technical-skill-reference"]],standalone:!0,features:[me([k]),T],decls:4,vars:3,consts:[[1,"w-full"],[1,"blue",3,"header"]],template:function(e,l){e&1&&(n(0,"div",0)(1,"p-panel",1),_(2,Je,1,0,"app-technical-skill-list")(3,Qe,1,0,"app-technical-skill-form"),o()()),e&2&&(s(),d("header",l.techSkillStore.$header()),s(),M(l.techSkillStore.$formMode()==="idle"?2:D(2,qe).includes(l.techSkillStore.$formMode())?3:-1))},dependencies:[C,fe,le,ae]})};export{Te as TechnicalSkillReferenceComponent};

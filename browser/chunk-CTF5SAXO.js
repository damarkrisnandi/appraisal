import{a as ue}from"./chunk-NXKUJ7VA.js";import{A as de,C as Q,E as $,g as j,j as pe,o as q,p as J,u as me}from"./chunk-W7PXDANK.js";import{m as D,o as U,s as he}from"./chunk-2FJU72MB.js";import"./chunk-4YRY4IP2.js";import"./chunk-6EZYCW4Y.js";import"./chunk-MUG45JXB.js";import{a as X}from"./chunk-OQKDZ6KP.js";import{b as K,e as B,f as G,g as z,h as w,k as O,l as H}from"./chunk-WWIJJSWY.js";import"./chunk-MQPYQJ3G.js";import{a as W}from"./chunk-6SLXRUYG.js";import{ka as le,oa as ce,va as se}from"./chunk-RKZRWIXU.js";import{m as A}from"./chunk-O2IJJLQI.js";import{Ab as h,Bb as s,Kb as E,La as oe,Lb as u,Nb as v,Pa as r,Sb as re,Tb as b,Ub as R,Ya as o,_ as ne,da as F,ea as y,eb as k,ec as C,gb as I,hb as p,ia as T,lb as g,mb as L,nb as N,pb as P,qb as V,rb as n,sa as S,sb as a,ta as _,tb as m,uc as x,xb as M}from"./chunk-ZIXU4GN5.js";var f=class t{constructor(i,e,l,c,d){this.spinnerService=i;this.messageService=e;this.confirmationService=l;this.confirmDialog=c;this.techSkillService=d;this.init()}state={$dataList:o([]),$dataLoading:o(!1),$pagingInfo:o(new X),$totalRowCount:o(1),$selectedData:o(null),$selectedVerified:o(!0),$loading:o(!1),$disabledTable:o(!1),$optionsFilter:o([]),$selectedFilter:o(""),$searchText:o(""),$searchBtnClickEvent:o(!1),$optionsMetricType:o([]),$descMetricType:o([]),$disabledUpdate:o(!0),$disabledSave:o(!0),$disabledCancel:o(!0),$formMode:o("idle"),$header:o("Daftar List Technical Skill"),$techSkillList:o([]),$techSkillLoading:o(!1),$techSkillpagingInfo:o(new X),$techSkilltotalRowCount:o(1),$selectedtechSkill:o(null)};$dataList=this.state.$dataList.asReadonly();$dataLoading=this.state.$dataLoading.asReadonly();$selectedData=this.state.$selectedData.asReadonly();$cols=o([{header:"No",class_td:"!text-center",type:"number"},{field:"technicalSkillName",header:"Kategori Keahlian",class_td:"!text-center"},{field:"name",header:"Keahlian Teknis",class_td:"!text-center"},{field:"metricTypeName",header:"Type of Metrics",class_td:"!text-center"},{field:"action",header:"Actions",class_td:"flex justify-center items-center gap-2",type:"action"}]).asReadonly();$pagingInfo=this.state.$pagingInfo.asReadonly();$totalRowCount=this.state.$totalRowCount.asReadonly();$optionsFilter=this.state.$optionsFilter.asReadonly();$selectedFilter=this.state.$selectedFilter.asReadonly();$searchText=this.state.$searchText.asReadonly();$filter=x(()=>{let i=null;i={};let e;return e=this.$searchText()??"",i.name=e,i});$optionsMetricType=this.state.$optionsMetricType.asReadonly();$descMetricType=this.state.$descMetricType.asReadonly();$disabledSave=x(()=>this.state.$disabledSave()&&this.state.$formMode()=="idle");$disabledCancel=x(()=>this.state.$disabledCancel()&&this.state.$formMode()=="idle");$disabledTable=x(()=>this.state.$formMode()=="edit");$formMode=this.state.$formMode.asReadonly();$header=this.state.$header.asReadonly();$techSkillList=this.state.$techSkillList.asReadonly();$techSkillLoading=this.state.$techSkillLoading.asReadonly();$selectedtechSkill=this.state.$selectedtechSkill.asReadonly();$techSkillpagingInfo=this.state.$techSkillpagingInfo.asReadonly();$techSkilltotalRowCount=this.state.$techSkilltotalRowCount.asReadonly();$colsTechSkill=o([{field:"name",header:"Technical Skill",class_td:"!text-center"},{field:"metricTypeName",header:"Type of Metrics",class_td:"!text-center",type:"dropdown"},{field:"delete",header:"Hapus",class_td:"!text-center",type:"delete"}]).asReadonly();init(){this.setSpinner(),this.populateList(),this.setSearchFilter(),this.generateMetric()}setSpinner(){W(this.state.$loading).subscribe(i=>i?this.spinnerService.show():this.spinnerService.hide())}populateList(){this.state.$dataLoading.set(!0);let i={wrapper:this.$filter(),pagingInfo:this.state.$pagingInfo(),totalRowCount:this.state.$totalRowCount()};this.techSkillService.findTechnialSkillCategoryPagination(i).subscribe(e=>{e.status&&(this.state.$pagingInfo.set(e.object.pagingInfo||new X),this.state.$dataList.set(e.object.dataList||[]),this.state.$totalRowCount.set(e.object.totalRowCount||0)),this.state.$dataLoading.set(!1)})}onLazyLoad(i){this.populateList()}populateTechSkillList(){}setSearchFilter(){this.state.$optionsFilter.set([{label:"Semua",value:null},{label:"Kategori",value:"category"},{label:"Keahlian Teknis",value:"techSkill"},{label:"Type of Metric",value:"metricType"}])}generateMetric(){let i=[],e=[];this.techSkillService.metricTypes().subscribe(l=>{l.status&&l.object.map(c=>{i.push({value:c.id,label:c.name}),e.push(c)})}),this.state.$optionsMetricType.set(i),this.state.$descMetricType.set(e)}resetState(){this.state.$dataList.set([]),this.state.$dataLoading.set(!1),this.state.$selectedData.set(null),this.state.$loading.set(!1),this.state.$searchText.set(""),this.state.$searchBtnClickEvent.set(!1)}onSearchBtnClicked({filter:i,search:e}){this.state.$selectedFilter.set(i),i&&this.state.$searchText.set(e),this.populateList()}onRefreshSearchClicked(){this.state.$searchText.set(""),this.state.$searchBtnClickEvent.set(!1),this.populateList()}onAddTechSkill(){this.resetState(),this.state.$formMode.set("add"),this.state.$header.set("Add Technical Skill")}editAction(i){this.state.$selectedData.set(i),this.state.$formMode.set("edit"),this.state.$header.set("Edit Technical Skill")}onSaveFormAdd(i){this.techSkillService.addTechnicalCategory(i).subscribe(e=>{e.status?(this.confirmDialog.confirm({message:`Berhasil ${this.state.$formMode()=="add"?"menambahkan":"update"} data technical skill!`,header:"Success",key:"ok",icon:"pi pi-check-circle",accept:()=>{this.state.$formMode.set("idle"),this.state.$header.set("Daftar List Technical Skill ")}}),this.populateList()):this.messageService.add({severity:"error",summary:"Error",detail:`Failed to ${this.state.$formMode()=="add"?"save":"update"} data.`})},e=>{this.messageService.add({severity:"warn",summary:"Perhatian",detail:`Error ${this.state.$formMode()=="add"?"save":"update"} data.`})})}onCancelFormAdd(){this.resetState(),this.state.$formMode.set("idle"),this.state.$header.set("Daftar List Technical Skill ")}deleteAction(i){this.state.$selectedData.set(i),this.confirmationService.confirm({header:"Konfirmasi",message:"Apakah Anda yakin ingin menghapus indicator ini?",accept:()=>{this.techSkillService.delete(i.id).subscribe(e=>{if(e.status){let l=`Hapus data ${this.$selectedData()?.name} berhasil!`;this.messageService.add({severity:"success",summary:"Success",detail:l}),this.state.$formMode.set("idle"),this.state.$header.set("Daftar List Technical Skill "),this.state.$selectedData.set(null),this.populateList()}else this.messageService.add({severity:"error",summary:"Error",detail:e.message});this.populateList()})},reject:()=>{}})}deleteTechSkill(i){}static \u0275fac=function(e){return new(e||t)(F(se),F(ce),F(le),F(le),F(ue))};static \u0275prov=ne({token:t,factory:t.\u0275fac})};var Z=class t{techSkillStore=y(f);filter=this.techSkillStore.$optionsFilter();selectedFilter=this.techSkillStore.$selectedFilter();search=this.techSkillStore.$searchText();searchForm=new z({filter:new w({value:null,disabled:!1}),search:new w({value:"",disabled:!1})});tempSearch={filter:null,search:""};onFilterChanges(){this.searchForm.controls.filter.valueChanges.subscribe(i=>{this.tempSearch.filter=i,this.searchForm.get("search")?.reset(),i?this.searchForm.get("search")?.enable():this.searchForm.get("search")?.disable()})}onSearchChanges(){this.searchForm.controls.search.valueChanges.subscribe(i=>{this.tempSearch.search=i})}onButtonClicked(){this.techSkillStore.onSearchBtnClicked(this.tempSearch)}onRefreshSearch(){this.searchForm.patchValue({filter:null}),this.techSkillStore.onSearchBtnClicked(this.tempSearch)}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=T({type:t,selectors:[["app-technical-skill-search"]],standalone:!0,features:[b],decls:8,vars:2,consts:[[1,"grid","grid-cols-6","grid-flow-rows","gap-2",3,"formGroup"],["styleClass","col-span-6 md:col-span-1","formControlName","filter","name","filter","appendTo","body",3,"options"],[1,"col-span-6","md:col-span-5"],["pInputText","","formControlName","search","name","search"],["icon","pi pi-search",1,"w-full","!h-full",3,"click"],["icon","pi pi-refresh","severity","info",1,"w-full","!h-full",3,"click"]],template:function(e,l){e&1&&(n(0,"div",0),m(1,"p-dropdown",1),n(2,"p-inputgroup",2),m(3,"input",3),n(4,"p-inputgroup-addon")(5,"p-button",4),h("click",function(){return l.onButtonClicked()}),a()(),n(6,"p-inputgroup-addon")(7,"p-button",5),h("click",function(){return l.onRefreshSearch()}),a()()()()),e&2&&(p("formGroup",l.searchForm),r(),p("options",l.techSkillStore.$optionsFilter()))},dependencies:[$,K,B,G,U,D,de,he,Q,O,H]})};var Ce=()=>[5,10,20];function $e(t,i){if(t&1&&(n(0,"th",10),u(1),a()),t&2){let e=i.$implicit;r(),v(" ",e.header," ")}}function ve(t,i){if(t&1&&(n(0,"tr"),k(1,$e,2,1,"th",9),a()),t&2){let e=i.$implicit;r(),p("ngForOf",e)}}function xe(t,i){if(t&1&&(n(0,"td"),u(1),a()),t&2){let e=s().$implicit,l=s().rowIndex;g(e.class_td),r(),v(" ",l+1," ")}}function we(t,i){if(t&1&&(n(0,"td"),m(1,"div",13),a()),t&2){let e=s().$implicit,l=s().$implicit;g(e.class_td),r(),p("outerHTML",e.template(l[e.field]),oe)}}function Fe(t,i){if(t&1){let e=M();n(0,"td")(1,"p-button",14),h("click",function(){S(e);let c=s(2).$implicit,d=s();return _(d.techSkillStore.editAction(c))}),a(),n(2,"p-button",15),h("click",function(){S(e);let c=s(2).$implicit,d=s();return _(d.techSkillStore.deleteAction(c))}),a()()}if(t&2){let e=s().$implicit;g(e.class_td)}}function Le(t,i){if(t&1&&(n(0,"td"),u(1),a()),t&2){let e=s().$implicit,l=s().$implicit;g(e.class_td),r(),v(" ",l[e.field].name?l[e.field].name:l[e.field]," ")}}function Me(t,i){if(t&1&&k(0,xe,2,3,"td",12)(1,we,2,3,"td",12)(2,Fe,3,2,"td",12)(3,Le,2,3,"td",12),t&2){let e,l=i.$implicit;L((e=l.type)==="number"?0:e==="custom"?1:e==="action"?2:3)}}function Re(t,i){if(t&1&&(n(0,"tr",11),P(1,Me,4,1,null,null,N),a()),t&2){let e=i.$implicit,l=i.columns;p("pSelectableRow",e),r(),V(l)}}function De(t,i){if(t&1&&(n(0,"tr")(1,"td",16),u(2,"Data Kosong"),a()()),t&2){let e=s();r(),I("colspan",e.techSkillStore.$cols().length)}}var ee=class t{techSkillStore=y(f);static \u0275fac=function(e){return new(e||t)};static \u0275cmp=T({type:t,selectors:[["app-technical-skill-list"]],standalone:!0,features:[b],decls:13,vars:12,consts:[["dt",""],["header",""],["body",""],["emptymessage",""],[1,"card"],[1,"flex","justify-end","items-center","gap-1","flex-col","md:flex-row","mb-2","w-full"],["styleClass","p-button-contrast w-full","icon","pi pi-plus","label","Tambah Keahlian Teknis",3,"click"],["showGridlines","",3,"onLazyLoad","columns","value","loading","paginator","rows","rowsPerPageOptions","paginatorDropdownAppendTo","lazy","totalRecords"],[3,"blocked","target"],["class","!text-center",4,"ngFor","ngForOf"],[1,"!text-center"],[3,"pSelectableRow"],[3,"class"],[3,"outerHTML"],["styleClass","p-button-info","icon","pi pi-pencil","pTooltip","Ubah Data","tooltipPosition","bottom",3,"click"],["styleClass","p-button-danger","icon","pi pi-trash","pTooltip","Hapus Data","tooltipPosition","bottom",3,"click"],[1,"!text-center","w-full"]],template:function(e,l){if(e&1){let c=M();n(0,"div",4)(1,"div",5)(2,"p-button",6),h("click",function(){return S(c),_(l.techSkillStore.onAddTechSkill())}),a(),m(3,"app-technical-skill-search"),a(),n(4,"p-table",7,0),h("onLazyLoad",function(ie){return S(c),_(l.techSkillStore.onLazyLoad(ie))}),k(6,ve,2,1,"ng-template",null,1,C)(8,Re,3,1,"ng-template",null,2,C)(10,De,3,1,"ng-template",null,3,C),a()(),m(12,"p-blockui",8)}if(e&2){let c=E(5),d=E(9);r(4),p("columns",l.techSkillStore.$cols())("value",l.techSkillStore.$dataList())("loading",l.techSkillStore.$dataLoading())("paginator",!0)("rows",5)("rowsPerPageOptions",R(11,Ce))("paginatorDropdownAppendTo",d)("lazy",!0)("totalRecords",l.techSkillStore.$totalRowCount()),r(8),p("blocked",l.techSkillStore.$disabledTable())("target",c)}},dependencies:[$,D,q,J,A,me,j,Z]})};var Ee=()=>[5,10,20];function Ie(t,i){if(t&1&&(n(0,"th",18),u(1),a()),t&2){let e=i.$implicit;r(),v(" ",e.header," ")}}function Ne(t,i){if(t&1&&(n(0,"tr"),k(1,Ie,2,1,"th",17),a()),t&2){let e=i.$implicit;r(),p("ngForOf",e)}}function Pe(t,i){if(t&1){let e=M();n(0,"td")(1,"p-button",21),h("click",function(){S(e);let c=s(2).$implicit,d=s();return _(d.techSkillStore.deleteTechSkill(c))}),a()()}if(t&2){let e=s().$implicit;g(e.class_td)}}function Ve(t,i){if(t&1&&(n(0,"td"),m(1,"p-dropdown",22),a()),t&2){let e=s().$implicit,l=s(2);g(e.class_td),r(),p("options",l.techSkillStore.$optionsMetricType())}}function Ae(t,i){if(t&1&&(n(0,"td"),u(1),a()),t&2){let e=s().$implicit,l=s().$implicit;g(e.class_td),r(),v(" ",l[e.field].name?l[e.field].name:l[e.field]," ")}}function je(t,i){if(t&1&&k(0,Pe,2,2,"td",20)(1,Ve,2,3,"td",20)(2,Ae,2,3,"td",20),t&2){let e,l=i.$implicit;L((e=l.type)==="delete"?0:e==="dropdown"?1:2)}}function Ke(t,i){if(t&1&&(n(0,"tr",19),P(1,je,3,1,null,null,N),a()),t&2){let e=i.$implicit,l=i.columns;p("pSelectableRow",e),r(),V(l)}}function Be(t,i){if(t&1&&(n(0,"tr")(1,"td",23),u(2,"Data Kosong"),a()()),t&2){let e=s();r(),I("colspan",e.techSkillStore.$cols().length)}}var te=class t{techSkillStore=y(f);$header=x(()=>"Technical Skill Form");techSKillForm=new z({category:new w({value:null,disabled:!1}),techSkill:new w({value:"",disabled:!1}),metricType:new w({value:null,disabled:!1})});selectedDataSubscription;constructor(){this.selectedDataSubscription=W(this.techSkillStore.$selectedData).subscribe(i=>{this.techSKillForm.patchValue({category:this.techSkillStore.$selectedData()?.technicalSkillCategoryId,techSkill:this.techSkillStore.$selectedData()?.name,metricType:this.techSkillStore.$selectedData()?.technicalSkillId})})}onSave(){let i={category:this.techSKillForm.get("category")?.value,metricTypeId:this.techSKillForm.get("metricType")?.value,indicator:this.techSKillForm.get("techSkill")?.value};this.techSkillStore.onSaveFormAdd(i)}ngOnDestroy(){this.techSKillForm.reset(),this.selectedDataSubscription.unsubscribe()}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=T({type:t,selectors:[["app-technical-skill-form"]],standalone:!0,features:[b],decls:26,vars:12,consts:[["dt",""],["header",""],["body",""],["emptymessage",""],[1,"mt-6","w-full","flex","flex-col","space-y-2"],[1,"flex","flex-col","space-y-1","mb-2",3,"formGroup"],[1,"grid","grid-cols-12","gap-2","items-center","pb-4"],[1,"col-span-12","md:col-span-2"],["pInputText","","formControlName","category","name","category",1,"col-span-8","md:col-span-7","bg-gray-50","border","border-gray-300","text-gray-900","rounded-lg","focus:ring-primary-600","focus:border-primary-600","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500"],["styleClass","p-button-contrast","icon","pi pi-plus","pTooltip","Tambah Technical Skill"],[1,"pt-4"],[2,"font-weight","600"],["showGridlines","",3,"onLazyLoad","columns","value","loading","paginator","rows","rowsPerPageOptions","paginatorDropdownAppendTo","lazy","totalRecords"],[1,"mt-4"],[1,"flex","justify-end","space-x-1","mt-6"],["label","Save","icon","pi pi-check","severity","success",3,"click","disabled"],["label","Cancel","icon","pi pi-sign-out","severity","danger",3,"click"],["class","!text-center",4,"ngFor","ngForOf"],[1,"!text-center"],[3,"pSelectableRow"],[3,"class"],["styleClass","p-button-danger","icon","pi pi-trash","pTooltip","Hapus Technical Skill",3,"click"],["formControlName","metricType","name","metricType","styleClass","col-span-12 md:col-span-7","appendTo","body","placeholder","Select Type of Metric",3,"options"],[1,"!text-center","w-full"]],template:function(e,l){if(e&1){let c=M();n(0,"div",4)(1,"div",5)(2,"div",6)(3,"label",7),u(4,"Nama Kategori:"),a(),m(5,"input",8),a(),n(6,"div",6)(7,"label",7),u(8,"Nama Skill:"),a(),m(9,"input",8)(10,"p-button",9),a(),n(11,"div",10)(12,"span",11),u(13,"List Technical Skill yang dipilih:"),a(),n(14,"p-table",12,0),h("onLazyLoad",function(ie){return S(c),_(l.techSkillStore.onLazyLoad(ie))}),k(16,Ne,2,1,"ng-template",null,1,C)(18,Ke,3,1,"ng-template",null,2,C)(20,Be,3,1,"ng-template",null,3,C),a()()(),n(22,"div",13)(23,"div",14)(24,"p-button",15),h("click",function(){return S(c),_(l.onSave())}),a(),n(25,"p-button",16),h("click",function(){return S(c),_(l.techSkillStore.onCancelFormAdd())}),a()()()()}if(e&2){let c=E(19);r(),p("formGroup",l.techSKillForm),r(13),p("columns",l.techSkillStore.$colsTechSkill())("value",l.techSkillStore.$dataList())("loading",l.techSkillStore.$dataLoading())("paginator",!0)("rows",5)("rowsPerPageOptions",R(11,Ee))("paginatorDropdownAppendTo",c)("lazy",!0)("totalRecords",l.techSkillStore.$totalRowCount()),r(10),p("disabled",l.techSkillStore.$disabledSave())}},dependencies:[$,K,B,G,U,D,q,J,A,j,Q,O,H]})};var Ge=()=>["add","edit"];function ze(t,i){t&1&&m(0,"app-technical-skill-list")}function Oe(t,i){t&1&&m(0,"app-technical-skill-form")}var Se=class t{techSkillStore=y(f);static \u0275fac=function(e){return new(e||t)};static \u0275cmp=T({type:t,selectors:[["app-technical-skill-reference"]],standalone:!0,features:[re([f]),b],decls:4,vars:3,consts:[[1,"w-full"],[1,"blue",3,"header"]],template:function(e,l){e&1&&(n(0,"div",0)(1,"p-panel",1),k(2,ze,1,0,"app-technical-skill-list")(3,Oe,1,0,"app-technical-skill-form"),a()()),e&2&&(r(),p("header",l.techSkillStore.$header()),r(),L(l.techSkillStore.$formMode()==="idle"?2:R(2,Ge).includes(l.techSkillStore.$formMode())?3:-1))},dependencies:[$,pe,ee,te]})};export{Se as TechnicalSkillReferenceComponent};

import{A as Se,C as Z,E as v,g as B,l as ue,q as X,r as Y,u as fe}from"./chunk-3P5LAZ2G.js";import{m as D,o as W,s as _e}from"./chunk-IR44L2GU.js";import"./chunk-4YRY4IP2.js";import"./chunk-6EZYCW4Y.js";import"./chunk-MUG45JXB.js";import{a as ee}from"./chunk-OQKDZ6KP.js";import{a as he}from"./chunk-CH6NKNWW.js";import{b as z,e as H,f as U,g as q,h as F,k as J,l as Q}from"./chunk-PT3WFG3U.js";import{a as pe}from"./chunk-MQPYQJ3G.js";import{a as G}from"./chunk-6SLXRUYG.js";import{ka as oe,oa as me,va as de}from"./chunk-RKZRWIXU.js";import{m as K}from"./chunk-O2IJJLQI.js";import{Ab as h,Bb as s,Kb as E,La as ce,Lb as u,Nb as x,Pa as r,Sb as se,Tb as C,Ub as M,Ya as o,_ as A,da as y,ea as T,eb as k,ec as $,gb as N,hb as p,ia as b,lb as g,mb as L,nb as V,pb as j,qb as O,rb as n,sa as S,sb as a,ta as _,tb as m,uc as w,xb as R}from"./chunk-ZIXU4GN5.js";var I=he.APPRAISAL_API_URL+"/technical-categories",te=class i{constructor(t){this.http=t}findTechnialSkillCategoryPagination(t){return this.http.post(I+"/findTechnialSkillCategoryPagination",t)}addTechnicalCategory(t){return this.http.post(I+"/add-technical-category",t)}updateTecnicalCategory(t){return this.http.post(I+"/update",t)}technicalSkills(){return this.http.get(I+"/technical-skills")}metricTypes(){return this.http.get(I+"/metric-types")}delete(t){return this.http.delete(I+"/delete/"+t)}static \u0275fac=function(e){return new(e||i)(y(pe))};static \u0275prov=A({token:i,factory:i.\u0275fac,providedIn:"root"})};var f=class i{constructor(t,e,l,c,d){this.spinnerService=t;this.messageService=e;this.confirmationService=l;this.confirmDialog=c;this.techSkillService=d;this.init()}state={$dataList:o([]),$dataLoading:o(!1),$pagingInfo:o(new ee),$totalRowCount:o(1),$selectedData:o(null),$selectedVerified:o(!0),$loading:o(!1),$disabledTable:o(!1),$optionsFilter:o([]),$selectedFilter:o(""),$searchText:o(""),$searchBtnClickEvent:o(!1),$optionsMetricType:o([]),$descMetricType:o([]),$disabledUpdate:o(!0),$disabledSave:o(!0),$disabledCancel:o(!0),$formMode:o("idle"),$header:o("Daftar List Technical Skill"),$techSkillList:o([]),$techSkillLoading:o(!1),$techSkillpagingInfo:o(new ee),$techSkilltotalRowCount:o(1),$selectedtechSkill:o(null)};$dataList=this.state.$dataList.asReadonly();$dataLoading=this.state.$dataLoading.asReadonly();$selectedData=this.state.$selectedData.asReadonly();$cols=o([{header:"No",class_td:"!text-center",type:"number"},{field:"technicalSkillName",header:"Kategori Keahlian",class_td:"!text-center"},{field:"name",header:"Keahlian Teknis",class_td:"!text-center"},{field:"metricTypeName",header:"Type of Metrics",class_td:"!text-center"},{field:"action",header:"Actions",class_td:"flex justify-center items-center gap-2",type:"action"}]).asReadonly();$pagingInfo=this.state.$pagingInfo.asReadonly();$totalRowCount=this.state.$totalRowCount.asReadonly();$optionsFilter=this.state.$optionsFilter.asReadonly();$selectedFilter=this.state.$selectedFilter.asReadonly();$searchText=this.state.$searchText.asReadonly();$filter=w(()=>{let t=null;t={};let e;return e=this.$searchText()??"",t.name=e,t});$optionsMetricType=this.state.$optionsMetricType.asReadonly();$descMetricType=this.state.$descMetricType.asReadonly();$disabledSave=w(()=>this.state.$disabledSave()&&this.state.$formMode()=="idle");$disabledCancel=w(()=>this.state.$disabledCancel()&&this.state.$formMode()=="idle");$disabledTable=w(()=>this.state.$formMode()=="edit");$formMode=this.state.$formMode.asReadonly();$header=this.state.$header.asReadonly();$techSkillList=this.state.$techSkillList.asReadonly();$techSkillLoading=this.state.$techSkillLoading.asReadonly();$selectedtechSkill=this.state.$selectedtechSkill.asReadonly();$techSkillpagingInfo=this.state.$techSkillpagingInfo.asReadonly();$techSkilltotalRowCount=this.state.$techSkilltotalRowCount.asReadonly();$colsTechSkill=o([{field:"name",header:"Technical Skill",class_td:"!text-center"},{field:"metricTypeName",header:"Type of Metrics",class_td:"!text-center",type:"dropdown"},{field:"delete",header:"Hapus",class_td:"!text-center",type:"delete"}]).asReadonly();init(){this.setSpinner(),this.populateList(),this.setSearchFilter(),this.generateMetric()}setSpinner(){G(this.state.$loading).subscribe(t=>t?this.spinnerService.show():this.spinnerService.hide())}populateList(){this.state.$dataLoading.set(!0);let t={wrapper:this.$filter(),pagingInfo:this.state.$pagingInfo(),totalRowCount:this.state.$totalRowCount()};this.techSkillService.findTechnialSkillCategoryPagination(t).subscribe(e=>{e.status&&(this.state.$pagingInfo.set(e.object.pagingInfo||new ee),this.state.$dataList.set(e.object.dataList||[]),this.state.$totalRowCount.set(e.object.totalRowCount||0)),this.state.$dataLoading.set(!1)})}onLazyLoad(t){this.populateList()}populateTechSkillList(){}setSearchFilter(){this.state.$optionsFilter.set([{label:"Semua",value:null},{label:"Kategori",value:"category"},{label:"Keahlian Teknis",value:"techSkill"},{label:"Type of Metric",value:"metricType"}])}generateMetric(){let t=[],e=[];this.techSkillService.metricTypes().subscribe(l=>{l.status&&l.object.map(c=>{t.push({value:c.id,label:c.name}),e.push(c)})}),this.state.$optionsMetricType.set(t),this.state.$descMetricType.set(e)}resetState(){this.state.$dataList.set([]),this.state.$dataLoading.set(!1),this.state.$selectedData.set(null),this.state.$loading.set(!1),this.state.$searchText.set(""),this.state.$searchBtnClickEvent.set(!1)}onSearchBtnClicked({filter:t,search:e}){this.state.$selectedFilter.set(t),t&&this.state.$searchText.set(e),this.populateList()}onRefreshSearchClicked(){this.state.$searchText.set(""),this.state.$searchBtnClickEvent.set(!1),this.populateList()}onAddTechSkill(){this.resetState(),this.state.$formMode.set("add"),this.state.$header.set("Add Technical Skill")}editAction(t){this.state.$selectedData.set(t),this.state.$formMode.set("edit"),this.state.$header.set("Edit Technical Skill")}onSaveFormAdd(t){this.techSkillService.addTechnicalCategory(t).subscribe(e=>{e.status?(this.confirmDialog.confirm({message:`Berhasil ${this.state.$formMode()=="add"?"menambahkan":"update"} data technical skill!`,header:"Success",key:"ok",icon:"pi pi-check-circle",accept:()=>{this.state.$formMode.set("idle"),this.state.$header.set("Daftar List Technical Skill ")}}),this.populateList()):this.messageService.add({severity:"error",summary:"Error",detail:`Failed to ${this.state.$formMode()=="add"?"save":"update"} data.`})},e=>{this.messageService.add({severity:"warn",summary:"Perhatian",detail:`Error ${this.state.$formMode()=="add"?"save":"update"} data.`})})}onCancelFormAdd(){this.resetState(),this.state.$formMode.set("idle"),this.state.$header.set("Daftar List Technical Skill ")}deleteAction(t){this.state.$selectedData.set(t),this.confirmationService.confirm({header:"Konfirmasi",message:"Apakah Anda yakin ingin menghapus indicator ini?",accept:()=>{this.techSkillService.delete(t.id).subscribe(e=>{if(e.status){let l=`Hapus data ${this.$selectedData()?.name} berhasil!`;this.messageService.add({severity:"success",summary:"Success",detail:l}),this.state.$formMode.set("idle"),this.state.$header.set("Daftar List Technical Skill "),this.state.$selectedData.set(null),this.populateList()}else this.messageService.add({severity:"error",summary:"Error",detail:e.message});this.populateList()})},reject:()=>{}})}deleteTechSkill(t){}static \u0275fac=function(e){return new(e||i)(y(de),y(me),y(oe),y(oe),y(te))};static \u0275prov=A({token:i,factory:i.\u0275fac})};var ie=class i{techSkillStore=T(f);filter=this.techSkillStore.$optionsFilter();selectedFilter=this.techSkillStore.$selectedFilter();search=this.techSkillStore.$searchText();searchForm=new q({filter:new F({value:null,disabled:!1}),search:new F({value:"",disabled:!1})});tempSearch={filter:null,search:""};onFilterChanges(){this.searchForm.controls.filter.valueChanges.subscribe(t=>{this.tempSearch.filter=t,this.searchForm.get("search")?.reset(),t?this.searchForm.get("search")?.enable():this.searchForm.get("search")?.disable()})}onSearchChanges(){this.searchForm.controls.search.valueChanges.subscribe(t=>{this.tempSearch.search=t})}onButtonClicked(){this.techSkillStore.onSearchBtnClicked(this.tempSearch)}onRefreshSearch(){this.searchForm.patchValue({filter:null}),this.techSkillStore.onSearchBtnClicked(this.tempSearch)}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=b({type:i,selectors:[["app-technical-skill-search"]],standalone:!0,features:[C],decls:8,vars:2,consts:[[1,"grid","grid-cols-6","grid-flow-rows","gap-2",3,"formGroup"],["styleClass","col-span-6 md:col-span-1","formControlName","filter","name","filter","appendTo","body",3,"options"],[1,"col-span-6","md:col-span-5"],["pInputText","","formControlName","search","name","search"],["icon","pi pi-search",1,"w-full","!h-full",3,"click"],["icon","pi pi-refresh","severity","info",1,"w-full","!h-full",3,"click"]],template:function(e,l){e&1&&(n(0,"div",0),m(1,"p-dropdown",1),n(2,"p-inputgroup",2),m(3,"input",3),n(4,"p-inputgroup-addon")(5,"p-button",4),h("click",function(){return l.onButtonClicked()}),a()(),n(6,"p-inputgroup-addon")(7,"p-button",5),h("click",function(){return l.onRefreshSearch()}),a()()()()),e&2&&(p("formGroup",l.searchForm),r(),p("options",l.techSkillStore.$optionsFilter()))},dependencies:[v,z,H,U,W,D,Se,_e,Z,J,Q]})};var we=()=>[5,10,20];function Fe(i,t){if(i&1&&(n(0,"th",10),u(1),a()),i&2){let e=t.$implicit;r(),x(" ",e.header," ")}}function Le(i,t){if(i&1&&(n(0,"tr"),k(1,Fe,2,1,"th",9),a()),i&2){let e=t.$implicit;r(),p("ngForOf",e)}}function Re(i,t){if(i&1&&(n(0,"td"),u(1),a()),i&2){let e=s().$implicit,l=s().rowIndex;g(e.class_td),r(),x(" ",l+1," ")}}function Me(i,t){if(i&1&&(n(0,"td"),m(1,"div",13),a()),i&2){let e=s().$implicit,l=s().$implicit;g(e.class_td),r(),p("outerHTML",e.template(l[e.field]),ce)}}function De(i,t){if(i&1){let e=R();n(0,"td")(1,"p-button",14),h("click",function(){S(e);let c=s(2).$implicit,d=s();return _(d.techSkillStore.editAction(c))}),a(),n(2,"p-button",15),h("click",function(){S(e);let c=s(2).$implicit,d=s();return _(d.techSkillStore.deleteAction(c))}),a()()}if(i&2){let e=s().$implicit;g(e.class_td)}}function Ie(i,t){if(i&1&&(n(0,"td"),u(1),a()),i&2){let e=s().$implicit,l=s().$implicit;g(e.class_td),r(),x(" ",l[e.field].name?l[e.field].name:l[e.field]," ")}}function Ee(i,t){if(i&1&&k(0,Re,2,3,"td",12)(1,Me,2,3,"td",12)(2,De,3,2,"td",12)(3,Ie,2,3,"td",12),i&2){let e,l=t.$implicit;L((e=l.type)==="number"?0:e==="custom"?1:e==="action"?2:3)}}function Pe(i,t){if(i&1&&(n(0,"tr",11),j(1,Ee,4,1,null,null,V),a()),i&2){let e=t.$implicit,l=t.columns;p("pSelectableRow",e),r(),O(l)}}function Ae(i,t){if(i&1&&(n(0,"tr")(1,"td",16),u(2,"Data Kosong"),a()()),i&2){let e=s();r(),N("colspan",e.techSkillStore.$cols().length)}}var le=class i{techSkillStore=T(f);static \u0275fac=function(e){return new(e||i)};static \u0275cmp=b({type:i,selectors:[["app-technical-skill-list"]],standalone:!0,features:[C],decls:13,vars:12,consts:[["dt",""],["header",""],["body",""],["emptymessage",""],[1,"card"],[1,"flex","justify-end","items-center","gap-1","flex-col","md:flex-row","mb-2","w-full"],["styleClass","p-button-contrast w-full","icon","pi pi-plus","label","Tambah Keahlian Teknis",3,"click"],["showGridlines","",3,"onLazyLoad","columns","value","loading","paginator","rows","rowsPerPageOptions","paginatorDropdownAppendTo","lazy","totalRecords"],[3,"blocked","target"],["class","!text-center",4,"ngFor","ngForOf"],[1,"!text-center"],[3,"pSelectableRow"],[3,"class"],[3,"outerHTML"],["styleClass","p-button-info","icon","pi pi-pencil","pTooltip","Ubah Data","tooltipPosition","bottom",3,"click"],["styleClass","p-button-danger","icon","pi pi-trash","pTooltip","Hapus Data","tooltipPosition","bottom",3,"click"],[1,"!text-center","w-full"]],template:function(e,l){if(e&1){let c=R();n(0,"div",4)(1,"div",5)(2,"p-button",6),h("click",function(){return S(c),_(l.techSkillStore.onAddTechSkill())}),a(),m(3,"app-technical-skill-search"),a(),n(4,"p-table",7,0),h("onLazyLoad",function(ne){return S(c),_(l.techSkillStore.onLazyLoad(ne))}),k(6,Le,2,1,"ng-template",null,1,$)(8,Pe,3,1,"ng-template",null,2,$)(10,Ae,3,1,"ng-template",null,3,$),a()(),m(12,"p-blockui",8)}if(e&2){let c=E(5),d=E(9);r(4),p("columns",l.techSkillStore.$cols())("value",l.techSkillStore.$dataList())("loading",l.techSkillStore.$dataLoading())("paginator",!0)("rows",5)("rowsPerPageOptions",M(11,we))("paginatorDropdownAppendTo",d)("lazy",!0)("totalRecords",l.techSkillStore.$totalRowCount()),r(8),p("blocked",l.techSkillStore.$disabledTable())("target",c)}},dependencies:[v,D,X,Y,K,fe,B,ie]})};var Ne=()=>[5,10,20];function Ve(i,t){if(i&1&&(n(0,"th",18),u(1),a()),i&2){let e=t.$implicit;r(),x(" ",e.header," ")}}function je(i,t){if(i&1&&(n(0,"tr"),k(1,Ve,2,1,"th",17),a()),i&2){let e=t.$implicit;r(),p("ngForOf",e)}}function Oe(i,t){if(i&1){let e=R();n(0,"td")(1,"p-button",21),h("click",function(){S(e);let c=s(2).$implicit,d=s();return _(d.techSkillStore.deleteTechSkill(c))}),a()()}if(i&2){let e=s().$implicit;g(e.class_td)}}function Ke(i,t){if(i&1&&(n(0,"td"),m(1,"p-dropdown",22),a()),i&2){let e=s().$implicit,l=s(2);g(e.class_td),r(),p("options",l.techSkillStore.$optionsMetricType())}}function Be(i,t){if(i&1&&(n(0,"td"),u(1),a()),i&2){let e=s().$implicit,l=s().$implicit;g(e.class_td),r(),x(" ",l[e.field].name?l[e.field].name:l[e.field]," ")}}function Ge(i,t){if(i&1&&k(0,Oe,2,2,"td",20)(1,Ke,2,3,"td",20)(2,Be,2,3,"td",20),i&2){let e,l=t.$implicit;L((e=l.type)==="delete"?0:e==="dropdown"?1:2)}}function ze(i,t){if(i&1&&(n(0,"tr",19),j(1,Ge,3,1,null,null,V),a()),i&2){let e=t.$implicit,l=t.columns;p("pSelectableRow",e),r(),O(l)}}function He(i,t){if(i&1&&(n(0,"tr")(1,"td",23),u(2,"Data Kosong"),a()()),i&2){let e=s();r(),N("colspan",e.techSkillStore.$cols().length)}}var ae=class i{techSkillStore=T(f);$header=w(()=>"Technical Skill Form");techSKillForm=new q({category:new F({value:null,disabled:!1}),techSkill:new F({value:"",disabled:!1}),metricType:new F({value:null,disabled:!1})});selectedDataSubscription;constructor(){this.selectedDataSubscription=G(this.techSkillStore.$selectedData).subscribe(t=>{this.techSKillForm.patchValue({category:this.techSkillStore.$selectedData()?.technicalSkillCategoryId,techSkill:this.techSkillStore.$selectedData()?.name,metricType:this.techSkillStore.$selectedData()?.technicalSkillId})})}onSave(){let t={category:this.techSKillForm.get("category")?.value,metricTypeId:this.techSKillForm.get("metricType")?.value,indicator:this.techSKillForm.get("techSkill")?.value};this.techSkillStore.onSaveFormAdd(t)}ngOnDestroy(){this.techSKillForm.reset(),this.selectedDataSubscription.unsubscribe()}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=b({type:i,selectors:[["app-technical-skill-form"]],standalone:!0,features:[C],decls:26,vars:12,consts:[["dt",""],["header",""],["body",""],["emptymessage",""],[1,"mt-6","w-full","flex","flex-col","space-y-2"],[1,"flex","flex-col","space-y-1","mb-2",3,"formGroup"],[1,"grid","grid-cols-12","gap-2","items-center","pb-4"],[1,"col-span-12","md:col-span-2"],["pInputText","","formControlName","category","name","category",1,"col-span-8","md:col-span-7","bg-gray-50","border","border-gray-300","text-gray-900","rounded-lg","focus:ring-primary-600","focus:border-primary-600","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500"],["styleClass","p-button-contrast","icon","pi pi-plus","pTooltip","Tambah Technical Skill"],[1,"pt-4"],[2,"font-weight","600"],["showGridlines","",3,"onLazyLoad","columns","value","loading","paginator","rows","rowsPerPageOptions","paginatorDropdownAppendTo","lazy","totalRecords"],[1,"mt-4"],[1,"flex","justify-end","space-x-1","mt-6"],["label","Save","icon","pi pi-check","severity","success",3,"click","disabled"],["label","Cancel","icon","pi pi-sign-out","severity","danger",3,"click"],["class","!text-center",4,"ngFor","ngForOf"],[1,"!text-center"],[3,"pSelectableRow"],[3,"class"],["styleClass","p-button-danger","icon","pi pi-trash","pTooltip","Hapus Technical Skill",3,"click"],["formControlName","metricType","name","metricType","styleClass","col-span-12 md:col-span-7","appendTo","body","placeholder","Select Type of Metric",3,"options"],[1,"!text-center","w-full"]],template:function(e,l){if(e&1){let c=R();n(0,"div",4)(1,"div",5)(2,"div",6)(3,"label",7),u(4,"Nama Kategori:"),a(),m(5,"input",8),a(),n(6,"div",6)(7,"label",7),u(8,"Nama Skill:"),a(),m(9,"input",8)(10,"p-button",9),a(),n(11,"div",10)(12,"span",11),u(13,"List Technical Skill yang dipilih:"),a(),n(14,"p-table",12,0),h("onLazyLoad",function(ne){return S(c),_(l.techSkillStore.onLazyLoad(ne))}),k(16,je,2,1,"ng-template",null,1,$)(18,ze,3,1,"ng-template",null,2,$)(20,He,3,1,"ng-template",null,3,$),a()()(),n(22,"div",13)(23,"div",14)(24,"p-button",15),h("click",function(){return S(c),_(l.onSave())}),a(),n(25,"p-button",16),h("click",function(){return S(c),_(l.techSkillStore.onCancelFormAdd())}),a()()()()}if(e&2){let c=E(19);r(),p("formGroup",l.techSKillForm),r(13),p("columns",l.techSkillStore.$colsTechSkill())("value",l.techSkillStore.$dataList())("loading",l.techSkillStore.$dataLoading())("paginator",!0)("rows",5)("rowsPerPageOptions",M(11,Ne))("paginatorDropdownAppendTo",c)("lazy",!0)("totalRecords",l.techSkillStore.$totalRowCount()),r(10),p("disabled",l.techSkillStore.$disabledSave())}},dependencies:[v,z,H,U,W,D,X,Y,K,B,Z,J,Q]})};var Ue=()=>["add","edit"];function qe(i,t){i&1&&m(0,"app-technical-skill-list")}function Je(i,t){i&1&&m(0,"app-technical-skill-form")}var ge=class i{techSkillStore=T(f);static \u0275fac=function(e){return new(e||i)};static \u0275cmp=b({type:i,selectors:[["app-technical-skill-reference"]],standalone:!0,features:[se([f]),C],decls:4,vars:3,consts:[[1,"w-full"],[1,"blue",3,"header"]],template:function(e,l){e&1&&(n(0,"div",0)(1,"p-panel",1),k(2,qe,1,0,"app-technical-skill-list")(3,Je,1,0,"app-technical-skill-form"),a()()),e&2&&(r(),p("header",l.techSkillStore.$header()),r(),L(l.techSkillStore.$formMode()==="idle"?2:M(2,Ue).includes(l.techSkillStore.$formMode())?3:-1))},dependencies:[v,ue,le,ae]})};export{ge as TechnicalSkillReferenceComponent};
